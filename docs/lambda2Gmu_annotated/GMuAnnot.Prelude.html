<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">

<head>
<meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
<link href="coqdoc.css" rel="stylesheet" type="text/css" />
<link href="coqdocjs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="config.js"></script>
<script type="text/javascript" src="coqdocjs.js"></script>
</head>

<body onload="document.getElementById('content').focus()">
  <div id="header">
    <span class="left">
      <span class="modulename"> <script> document.write(document.title) </script> </span>
    </span>

    <span class="button" id="toggle-proofs"></span>

    <span class="right">
      <a href="../">Project Page</a>
      <a href="./indexpage.html"> Index </a>
      <a href="./toc.html"> Table of Contents </a>
    </span>
</div>
    <div id="content" tabindex="-1" onblur="document.getElementById('content').focus()">
    <div id="main">
<h1 class="libtitle">GMuAnnot.Prelude</h1>

<div class="code">
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Export</span> <a class="idref" href="../lambda2Gmu/GMu.Zip.html#"><span class="id" title="library">GMu.Zip</span></a>.<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="GMuAnnot.Definitions.html#"><span class="id" title="library">GMuAnnot.Definitions</span></a>.<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Export</span> <a class="idref" href="GMuAnnot.Definitions.html#"><span class="id" title="library">GMuAnnot.Definitions</span></a>.<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Export</span> <span class="id" title="library">TLC.LibTactics</span>.<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Export</span> <span class="id" title="library">TLC.LibFset</span>.<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Export</span> <span class="id" title="library">TLC.LibEnv</span>.<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <span class="id" title="library">TLC.LibLN</span>.<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Export</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.0/stdlib//Coq.micromega.Psatz.html#"><span class="id" title="library">Psatz</span></a>.<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.0/stdlib//Coq.Init.Nat.html#"><span class="id" title="library">Coq.Init.Nat</span></a>.<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.0/stdlib//Coq.Arith.Compare_dec.html#"><span class="id" title="library">Coq.Arith.Compare_dec</span></a>.<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.0/stdlib//Coq.Arith.EqNat.html#"><span class="id" title="library">Coq.Arith.EqNat</span></a>.<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.0/stdlib//Coq.Lists.List.html#"><span class="id" title="library">List</span></a>.<br/>

<br/>
#[<span class="id" title="var">export</span>] <span class="id" title="keyword">Hint</span> <span class="id" title="keyword">Constructors</span> <a class="idref" href="GMuAnnot.Prelude.html#type"><span class="id" title="inductive">type</span></a> <a class="idref" href="GMuAnnot.Prelude.html#term"><span class="id" title="inductive">term</span></a> <a class="idref" href="GMuAnnot.Prelude.html#wft"><span class="id" title="inductive">wft</span></a> <a class="idref" href="GMuAnnot.Prelude.html#typing"><span class="id" title="inductive">typing</span></a> <a class="idref" href="GMuAnnot.Prelude.html#red"><span class="id" title="inductive">red</span></a> <a class="idref" href="GMuAnnot.Prelude.html#value"><span class="id" title="inductive">value</span></a>.<br/>

<br/>
#[<span class="id" title="var">export</span>] <span class="id" title="keyword">Hint</span> <span class="id" title="keyword">Resolve</span> <span class="id" title="var">typing_var</span> <span class="id" title="var">typing_app</span> <span class="id" title="var">typing_tapp</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="value_is_term" class="idref" href="#value_is_term"><span class="id" title="lemma">value_is_term</span></a> : <span class="id" title="keyword">∀</span> <a id="e:1" class="idref" href="#e:1"><span class="id" title="binder">e</span></a>, <a class="idref" href="GMuAnnot.Definitions.html#value"><span class="id" title="inductive">value</span></a> <a class="idref" href="GMuAnnot.Prelude.html#e:1"><span class="id" title="variable">e</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="GMuAnnot.Definitions.html#term"><span class="id" title="inductive">term</span></a> <a class="idref" href="GMuAnnot.Prelude.html#e:1"><span class="id" title="variable">e</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">e</span>; <span class="id" title="tactic">intro</span> <span class="id" title="var">Hv</span>; <span class="id" title="tactic">inversion</span> <span class="id" title="var">Hv</span>; <span class="id" title="tactic">eauto</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
Gathering free names already used in the proofs 
</div>
<div class="code">
<span class="id" title="keyword">Ltac</span> <span class="id" title="var">gather_vars</span> :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">A</span> := <span class="id" title="var">gather_vars_with</span> (<span class="id" title="keyword">fun</span> <a id="x:2" class="idref" href="#x:2"><span class="id" title="binder">x</span></a> : <span class="id" title="definition">vars</span> ⇒ <a class="idref" href="GMuAnnot.Prelude.html#x:2"><span class="id" title="variable">x</span></a>) <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">B</span> := <span class="id" title="var">gather_vars_with</span> (<span class="id" title="keyword">fun</span> <a id="x:3" class="idref" href="#x:3"><span class="id" title="binder">x</span></a> : <span class="id" title="axiom">var</span> ⇒ <span class="id" title="notation">\{</span><a class="idref" href="GMuAnnot.Prelude.html#x:3"><span class="id" title="variable">x</span></a><span class="id" title="notation">}</span>) <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">C</span> := <span class="id" title="var">gather_vars_with</span> (<span class="id" title="keyword">fun</span> <a id="x:4" class="idref" href="#x:4"><span class="id" title="binder">x</span></a> : <a class="idref" href="GMuAnnot.Definitions.html#trm"><span class="id" title="inductive">trm</span></a> ⇒ <a class="idref" href="GMuAnnot.Definitions.html#fv_trm"><span class="id" title="definition">fv_trm</span></a> <a class="idref" href="GMuAnnot.Prelude.html#x:4"><span class="id" title="variable">x</span></a>) <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">E</span> := <span class="id" title="var">gather_vars_with</span> (<span class="id" title="keyword">fun</span> <a id="x:5" class="idref" href="#x:5"><span class="id" title="binder">x</span></a> : <a class="idref" href="../lambda2Gmu/GMu.Definitions.html#typ"><span class="id" title="inductive">typ</span></a> ⇒ <a class="idref" href="../lambda2Gmu/GMu.Definitions.html#fv_typ"><span class="id" title="definition">fv_typ</span></a> <a class="idref" href="GMuAnnot.Prelude.html#x:5"><span class="id" title="variable">x</span></a>) <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">F</span> := <span class="id" title="var">gather_vars_with</span> (<span class="id" title="keyword">fun</span> <a id="x:6" class="idref" href="#x:6"><span class="id" title="binder">x</span></a> : <a class="idref" href="../lambda2Gmu/GMu.Definitions.html#ctx"><span class="id" title="definition">ctx</span></a> ⇒ <span class="id" title="axiom">dom</span> <a class="idref" href="GMuAnnot.Prelude.html#x:6"><span class="id" title="variable">x</span></a> <span class="id" title="notation">\</span><span class="id" title="notation">u</span> <a class="idref" href="../lambda2Gmu/GMu.Definitions.html#fv_env"><span class="id" title="definition">fv_env</span></a> <a class="idref" href="GMuAnnot.Prelude.html#x:6"><span class="id" title="variable">x</span></a>) <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">G</span> := <span class="id" title="var">gather_vars_with</span> (<span class="id" title="keyword">fun</span> <a id="x:7" class="idref" href="#x:7"><span class="id" title="binder">x</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.13.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <span class="id" title="axiom">var</span> ⇒ <span class="id" title="definition">from_list</span> <a class="idref" href="GMuAnnot.Prelude.html#x:7"><span class="id" title="variable">x</span></a>) <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">H</span> := <span class="id" title="var">gather_vars_with</span> (<span class="id" title="keyword">fun</span> <a id="x:8" class="idref" href="#x:8"><span class="id" title="binder">x</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.13.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="../lambda2Gmu/GMu.Definitions.html#typ"><span class="id" title="inductive">typ</span></a> ⇒ <a class="idref" href="../lambda2Gmu/GMu.Definitions.html#fv_typs"><span class="id" title="definition">fv_typs</span></a> <a class="idref" href="GMuAnnot.Prelude.html#x:8"><span class="id" title="variable">x</span></a>) <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">I</span> := <span class="id" title="var">gather_vars_with</span> (<span class="id" title="keyword">fun</span> <a id="x:9" class="idref" href="#x:9"><span class="id" title="binder">x</span></a> : <a class="idref" href="../lambda2Gmu/GMu.Definitions.html#typctx"><span class="id" title="definition">typctx</span></a> ⇒ <a class="idref" href="../lambda2Gmu/GMu.Definitions.html#e1e06a37011ebd9f9e861e05c79f4e29"><span class="id" title="definition">domΔ</span></a> <a class="idref" href="GMuAnnot.Prelude.html#x:9"><span class="id" title="variable">x</span></a> <span class="id" title="notation">\</span><span class="id" title="notation">u</span> <a class="idref" href="../lambda2Gmu/GMu.Definitions.html#fv_delta"><span class="id" title="definition">fv_delta</span></a> <a class="idref" href="GMuAnnot.Prelude.html#x:9"><span class="id" title="variable">x</span></a>) <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">constr</span>:(<span class="id" title="var">A</span> <span class="id" title="notation">\</span><span class="id" title="notation">u</span> <span class="id" title="var">B</span> <span class="id" title="notation">\</span><span class="id" title="notation">u</span> <span class="id" title="var">C</span> <span class="id" title="notation">\</span><span class="id" title="notation">u</span> <span class="id" title="var">E</span> <span class="id" title="notation">\</span><span class="id" title="notation">u</span> <span class="id" title="var">F</span> <span class="id" title="notation">\</span><span class="id" title="notation">u</span> <span class="id" title="var">G</span> <span class="id" title="notation">\</span><span class="id" title="notation">u</span> <span class="id" title="var">H</span> <span class="id" title="notation">\</span><span class="id" title="notation">u</span> <span class="id" title="var">I</span>).<br/>

<br/>
</div>

<div class="doc">
"pick_fresh x" tactic create a fresh variable with name x 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Ltac</span> <span class="id" title="var">pick_fresh</span> <span class="id" title="var">x</span> :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">L</span> := <span class="id" title="var">gather_vars</span> <span class="id" title="tactic">in</span> (<span class="id" title="var">pick_fresh_gen</span> <span class="id" title="var">L</span> <span class="id" title="var">x</span>).<br/>

<br/>
</div>

<div class="doc">
"apply_fresh T as x" is used to apply inductive rule which
   use an universal quantification over a cofinite set 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Tactic Notation</span> "apply_fresh" <span class="id" title="keyword">constr</span>(<span class="id" title="var">T</span>) "as" <span class="id" title="var">ident</span>(<span class="id" title="var">x</span>) :=<br/>
&nbsp;&nbsp;<span class="id" title="var">apply_fresh_base</span> <span class="id" title="var">T</span> <span class="id" title="var">gather_vars</span> <span class="id" title="var">x</span>.<br/>

<br/>
<span class="id" title="keyword">Tactic Notation</span> "apply_fresh" "*" <span class="id" title="keyword">constr</span>(<span class="id" title="var">T</span>) "as" <span class="id" title="var">ident</span>(<span class="id" title="var">x</span>) :=<br/>
&nbsp;&nbsp;<span class="id" title="var">apply_fresh</span> <span class="id" title="var">T</span> <span class="id" title="keyword">as</span> <span class="id" title="var">x</span>; <span class="id" title="var">auto_star</span>.<br/>

<br/>
<span class="id" title="keyword">Ltac</span> <span class="id" title="var">get_env</span> :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="keyword">goal</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| |- <a class="idref" href="../lambda2Gmu/GMu.Definitions.html#wft"><span class="id" title="inductive">wft</span></a> ?<span class="id" title="var">E</span> <span class="id" title="var">_</span> ⇒ <span class="id" title="var">E</span><br/>
&nbsp;&nbsp;| |- <a class="idref" href="GMuAnnot.Definitions.html#typing"><span class="id" title="inductive">typing</span></a> ?<span class="id" title="var">E</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> ⇒ <span class="id" title="var">E</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
<span class="id" title="keyword">Ltac</span> <span class="id" title="var">handleforall</span> :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">Hforall</span> := <span class="id" title="tactic">fresh</span> "Hforall" <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="keyword">goal</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| <span class="id" title="var">H</span>: <a class="idref" href="http://coq.inria.fr/distrib/V8.13.0/stdlib//Coq.Lists.List.html#Forall"><span class="id" title="inductive">List.Forall</span></a> ?<span class="id" title="var">P</span> ?<span class="id" title="var">ls</span> |- <span class="id" title="var">_</span> ⇒ <span class="id" title="tactic">rename</span> <span class="id" title="var">H</span> <span class="id" title="var">into</span> <span class="id" title="var">Hforall</span>; <span class="id" title="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.0/stdlib//Coq.Lists.List.html#Forall_forall"><span class="id" title="lemma">List.Forall_forall</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hforall</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
<span class="id" title="keyword">Ltac</span> <span class="id" title="var">rewritemapmap</span> :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">H'</span> := <span class="id" title="tactic">fresh</span> "Hmapmap" <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="keyword">goal</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| <span class="id" title="var">H</span>: <a class="idref" href="http://coq.inria.fr/distrib/V8.13.0/stdlib//Coq.Lists.List.html#map"><span class="id" title="definition">List.map</span></a> ?<span class="id" title="var">f</span> ?<span class="id" title="var">ls</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">(</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.13.0/stdlib//Coq.Lists.List.html#map"><span class="id" title="definition">List.map</span></a> ?<span class="id" title="var">g</span> (<a class="idref" href="http://coq.inria.fr/distrib/V8.13.0/stdlib//Coq.Lists.List.html#map"><span class="id" title="definition">List.map</span></a> ?<span class="id" title="var">h</span> ?<span class="id" title="var">ls</span>)<a class="idref" href="http://coq.inria.fr/distrib/V8.13.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">)</span></a> |- <span class="id" title="var">_</span> ⇒ <span class="id" title="tactic">rename</span> <span class="id" title="var">H</span> <span class="id" title="var">into</span> <span class="id" title="var">H'</span>; <span class="id" title="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.0/stdlib//Coq.Lists.List.html#map_map"><span class="id" title="lemma">List.map_map</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H'</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
<span class="id" title="keyword">Ltac</span> <span class="id" title="var">decide_compare</span> <span class="id" title="var">i</span> <span class="id" title="var">j</span> :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">CMP</span> := <span class="id" title="tactic">fresh</span> "CMP" <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">EQ</span> := <span class="id" title="tactic">fresh</span> "EQ" <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;<span class="id" title="var">remember</span> (<span class="id" title="var">i</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.0/stdlib//Coq.Init.Nat.html#4a243c6f4b9487508e7110341eeedb0b"><span class="id" title="notation">?=</span></a> <span class="id" title="var">j</span>) <span class="id" title="keyword">as</span> <span class="id" title="var">CMP</span> <span class="id" title="var">eqn</span>: <span class="id" title="var">EQ</span>;<br/>
&nbsp;&nbsp;<span class="id" title="tactic">symmetry</span> <span class="id" title="tactic">in</span> <span class="id" title="var">EQ</span>;<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">CMP</span>;<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="keyword">goal</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| <span class="id" title="var">H</span>: <a class="idref" href="http://coq.inria.fr/distrib/V8.13.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">(</span></a><span class="id" title="var">i</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.0/stdlib//Coq.Init.Nat.html#4a243c6f4b9487508e7110341eeedb0b"><span class="id" title="notation">?=</span></a> <span class="id" title="var">j</span><a class="idref" href="http://coq.inria.fr/distrib/V8.13.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.0/stdlib//Coq.Init.Datatypes.html#Eq"><span class="id" title="constructor">Eq</span></a> |- <span class="id" title="var">_</span> ⇒ <span class="id" title="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.0/stdlib//Coq.Arith.Compare_dec.html#nat_compare_eq"><span class="id" title="lemma">nat_compare_eq</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span><br/>
&nbsp;&nbsp;| <span class="id" title="var">H</span>: <a class="idref" href="http://coq.inria.fr/distrib/V8.13.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">(</span></a><span class="id" title="var">i</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.0/stdlib//Coq.Init.Nat.html#4a243c6f4b9487508e7110341eeedb0b"><span class="id" title="notation">?=</span></a> <span class="id" title="var">j</span><a class="idref" href="http://coq.inria.fr/distrib/V8.13.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.0/stdlib//Coq.Init.Datatypes.html#Lt"><span class="id" title="constructor">Lt</span></a> |- <span class="id" title="var">_</span> ⇒ <span class="id" title="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.0/stdlib//Coq.Arith.Compare_dec.html#nat_compare_lt"><span class="id" title="lemma">nat_compare_lt</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span><br/>
&nbsp;&nbsp;| <span class="id" title="var">H</span>: <a class="idref" href="http://coq.inria.fr/distrib/V8.13.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">(</span></a><span class="id" title="var">i</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.0/stdlib//Coq.Init.Nat.html#4a243c6f4b9487508e7110341eeedb0b"><span class="id" title="notation">?=</span></a> <span class="id" title="var">j</span><a class="idref" href="http://coq.inria.fr/distrib/V8.13.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.0/stdlib//Coq.Init.Datatypes.html#Gt"><span class="id" title="constructor">Gt</span></a> |- <span class="id" title="var">_</span> ⇒ <span class="id" title="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.0/stdlib//Coq.Arith.Compare_dec.html#nat_compare_gt"><span class="id" title="lemma">nat_compare_gt</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
<span class="id" title="keyword">Ltac</span> <span class="id" title="var">crush_compare</span> :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="keyword">goal</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| <span class="id" title="var">H</span>: <span class="id" title="keyword">context</span> [(?<span class="id" title="var">i</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.0/stdlib//Coq.Init.Nat.html#4a243c6f4b9487508e7110341eeedb0b"><span class="id" title="notation">?=</span></a> ?<span class="id" title="var">j</span>)] |- <span class="id" title="var">_</span> ⇒ <span class="id" title="var">decide_compare</span> <span class="id" title="var">i</span> <span class="id" title="var">j</span>; (<span class="id" title="tactic">try</span> <span class="id" title="var">lia</span>); <span class="id" title="tactic">eauto</span><br/>
&nbsp;&nbsp;| |- <span class="id" title="keyword">context</span> [(?<span class="id" title="var">i</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.0/stdlib//Coq.Init.Nat.html#4a243c6f4b9487508e7110341eeedb0b"><span class="id" title="notation">?=</span></a> ?<span class="id" title="var">j</span>)] ⇒ <span class="id" title="var">decide_compare</span> <span class="id" title="var">i</span> <span class="id" title="var">j</span>; (<span class="id" title="tactic">try</span> <span class="id" title="var">lia</span>); <span class="id" title="tactic">eauto</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
<span class="id" title="keyword">Ltac</span> <span class="id" title="var">decide_eq</span> <span class="id" title="var">i</span> <span class="id" title="var">j</span> :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">CMP</span> := <span class="id" title="tactic">fresh</span> "CMP" <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">EQ</span> := <span class="id" title="tactic">fresh</span> "EQ" <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;<span class="id" title="var">remember</span> (<span class="id" title="var">i</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.0/stdlib//Coq.Init.Nat.html#ad2ec4e405f68c46c0a176e3e94ae2e3"><span class="id" title="notation">=?</span></a> <span class="id" title="var">j</span>) <span class="id" title="keyword">as</span> <span class="id" title="var">CMP</span> <span class="id" title="var">eqn</span>: <span class="id" title="var">EQ</span>;<br/>
&nbsp;&nbsp;<span class="id" title="tactic">symmetry</span> <span class="id" title="tactic">in</span> <span class="id" title="var">EQ</span>;<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">CMP</span>;<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="keyword">goal</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| <span class="id" title="var">H</span>: <a class="idref" href="http://coq.inria.fr/distrib/V8.13.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">(</span></a><span class="id" title="var">i</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.0/stdlib//Coq.Init.Nat.html#ad2ec4e405f68c46c0a176e3e94ae2e3"><span class="id" title="notation">=?</span></a> <span class="id" title="var">j</span><a class="idref" href="http://coq.inria.fr/distrib/V8.13.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.0/stdlib//Coq.Init.Datatypes.html#true"><span class="id" title="constructor">true</span></a> |- <span class="id" title="var">_</span> ⇒ <span class="id" title="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.0/stdlib//Coq.Arith.EqNat.html#beq_nat_true"><span class="id" title="lemma">beq_nat_true</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span><br/>
&nbsp;&nbsp;| <span class="id" title="var">H</span>: <a class="idref" href="http://coq.inria.fr/distrib/V8.13.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">(</span></a><span class="id" title="var">i</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.0/stdlib//Coq.Init.Nat.html#ad2ec4e405f68c46c0a176e3e94ae2e3"><span class="id" title="notation">=?</span></a> <span class="id" title="var">j</span><a class="idref" href="http://coq.inria.fr/distrib/V8.13.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.0/stdlib//Coq.Init.Datatypes.html#false"><span class="id" title="constructor">false</span></a> |- <span class="id" title="var">_</span> ⇒ <span class="id" title="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.0/stdlib//Coq.Arith.EqNat.html#beq_nat_false"><span class="id" title="lemma">beq_nat_false</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
<span class="id" title="keyword">Ltac</span> <span class="id" title="var">crush_eq</span> :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="keyword">goal</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| <span class="id" title="var">H</span>: <span class="id" title="keyword">context</span> [(?<span class="id" title="var">i</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.0/stdlib//Coq.Init.Nat.html#ad2ec4e405f68c46c0a176e3e94ae2e3"><span class="id" title="notation">=?</span></a> ?<span class="id" title="var">j</span>)] |- <span class="id" title="var">_</span> ⇒ <span class="id" title="var">decide_eq</span> <span class="id" title="var">i</span> <span class="id" title="var">j</span>; <span class="id" title="tactic">eauto</span><br/>
&nbsp;&nbsp;| |- <span class="id" title="keyword">context</span> [(?<span class="id" title="var">i</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.0/stdlib//Coq.Init.Nat.html#ad2ec4e405f68c46c0a176e3e94ae2e3"><span class="id" title="notation">=?</span></a> ?<span class="id" title="var">j</span>)] ⇒ <span class="id" title="var">decide_eq</span> <span class="id" title="var">i</span> <span class="id" title="var">j</span>; <span class="id" title="tactic">eauto</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
<span class="comment">(*&nbsp;maybe&nbsp;move&nbsp;strong&nbsp;induction&nbsp;to&nbsp;separate&nbsp;file?&nbsp;*)</span><br/>
<span class="id" title="keyword">Lemma</span> <a id="strong_induction" class="idref" href="#strong_induction"><span class="id" title="lemma">strong_induction</span></a> (<a id="P:10" class="idref" href="#P:10"><span class="id" title="binder">P</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.13.0/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <span class="id" title="keyword">Prop</span>): <a class="idref" href="http://coq.inria.fr/distrib/V8.13.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">(</span></a><span class="id" title="keyword">∀</span> <a id="m:11" class="idref" href="#m:11"><span class="id" title="binder">m</span></a>, <a class="idref" href="http://coq.inria.fr/distrib/V8.13.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">(</span></a><span class="id" title="keyword">∀</span> <a id="k:12" class="idref" href="#k:12"><span class="id" title="binder">k</span></a>, <a class="idref" href="GMuAnnot.Prelude.html#k:12"><span class="id" title="variable">k</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.0/stdlib//Coq.Init.Peano.html#::nat_scope:x_'&lt;'_x"><span class="id" title="notation">&lt;</span></a> <a class="idref" href="GMuAnnot.Prelude.html#m:11"><span class="id" title="variable">m</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="GMuAnnot.Prelude.html#P:10"><span class="id" title="variable">P</span></a> <a class="idref" href="GMuAnnot.Prelude.html#k:12"><span class="id" title="variable">k</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.13.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="GMuAnnot.Prelude.html#P:10"><span class="id" title="variable">P</span></a> <a class="idref" href="GMuAnnot.Prelude.html#m:11"><span class="id" title="variable">m</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.13.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <span class="id" title="keyword">∀</span> <a id="n:13" class="idref" href="#n:13"><span class="id" title="binder">n</span></a>, <a class="idref" href="GMuAnnot.Prelude.html#P:10"><span class="id" title="variable">P</span></a> <a class="idref" href="GMuAnnot.Prelude.html#n:13"><span class="id" title="variable">n</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.0/stdlib//Coq.Arith.Wf_nat.html#induction_ltof1"><span class="id" title="lemma">Wf_nat.induction_ltof1</span></a>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="strong_induction_on_term_size_helper" class="idref" href="#strong_induction_on_term_size_helper"><span class="id" title="lemma">strong_induction_on_term_size_helper</span></a> : <span class="id" title="keyword">∀</span> (<a id="P:14" class="idref" href="#P:14"><span class="id" title="binder">P</span></a> : <a class="idref" href="GMuAnnot.Definitions.html#trm"><span class="id" title="inductive">trm</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <span class="id" title="keyword">Prop</span>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.13.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">(</span></a><span class="id" title="keyword">∀</span> <a id="n:15" class="idref" href="#n:15"><span class="id" title="binder">n</span></a>, <a class="idref" href="http://coq.inria.fr/distrib/V8.13.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">(</span></a><span class="id" title="keyword">∀</span> <a id="e:16" class="idref" href="#e:16"><span class="id" title="binder">e</span></a>, <a class="idref" href="GMuAnnot.Definitions.html#trm_size"><span class="id" title="definition">trm_size</span></a> <a class="idref" href="GMuAnnot.Prelude.html#e:16"><span class="id" title="variable">e</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.0/stdlib//Coq.Init.Peano.html#::nat_scope:x_'&lt;'_x"><span class="id" title="notation">&lt;</span></a> <a class="idref" href="GMuAnnot.Prelude.html#n:15"><span class="id" title="variable">n</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="GMuAnnot.Prelude.html#P:14"><span class="id" title="variable">P</span></a> <a class="idref" href="GMuAnnot.Prelude.html#e:16"><span class="id" title="variable">e</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.13.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <span class="id" title="keyword">∀</span> <a id="e:17" class="idref" href="#e:17"><span class="id" title="binder">e</span></a>, <a class="idref" href="GMuAnnot.Definitions.html#trm_size"><span class="id" title="definition">trm_size</span></a> <a class="idref" href="GMuAnnot.Prelude.html#e:17"><span class="id" title="variable">e</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="GMuAnnot.Prelude.html#n:15"><span class="id" title="variable">n</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="GMuAnnot.Prelude.html#P:14"><span class="id" title="variable">P</span></a> <a class="idref" href="GMuAnnot.Prelude.html#e:17"><span class="id" title="variable">e</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.13.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">∀</span> <a id="n:18" class="idref" href="#n:18"><span class="id" title="binder">n</span></a> <a id="e:19" class="idref" href="#e:19"><span class="id" title="binder">e</span></a>, <a class="idref" href="GMuAnnot.Definitions.html#trm_size"><span class="id" title="definition">trm_size</span></a> <a class="idref" href="GMuAnnot.Prelude.html#e:19"><span class="id" title="variable">e</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="GMuAnnot.Prelude.html#n:18"><span class="id" title="variable">n</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="GMuAnnot.Prelude.html#P:14"><span class="id" title="variable">P</span></a> <a class="idref" href="GMuAnnot.Prelude.html#e:19"><span class="id" title="variable">e</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="var">introv</span> <span class="id" title="var">IH</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">lets</span> <span class="id" title="var">K</span>: <a class="idref" href="GMuAnnot.Prelude.html#strong_induction"><span class="id" title="lemma">strong_induction</span></a> (<span class="id" title="keyword">fun</span> <a id="n:22" class="idref" href="#n:22"><span class="id" title="binder">n</span></a> ⇒ <span class="id" title="keyword">∀</span> <a id="e:23" class="idref" href="#e:23"><span class="id" title="binder">e</span></a>, <a class="idref" href="GMuAnnot.Definitions.html#trm_size"><span class="id" title="definition">trm_size</span></a> <a class="idref" href="GMuAnnot.Prelude.html#e:21"><span class="id" title="variable">e</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="GMuAnnot.Prelude.html#n:20"><span class="id" title="variable">n</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <span class="id" title="var">P</span> <a class="idref" href="GMuAnnot.Prelude.html#e:21"><span class="id" title="variable">e</span></a>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">K</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">introv</span> <span class="id" title="var">IHk</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">lets</span> <span class="id" title="var">IHm</span>: <span class="id" title="var">IH</span> <span class="id" title="var">m</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">IHm</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <span class="id" title="var">IHk</span>; <span class="id" title="tactic">eauto</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="strong_induction_on_term_size" class="idref" href="#strong_induction_on_term_size"><span class="id" title="lemma">strong_induction_on_term_size</span></a> : <span class="id" title="keyword">∀</span> (<a id="P:24" class="idref" href="#P:24"><span class="id" title="binder">P</span></a> : <a class="idref" href="GMuAnnot.Definitions.html#trm"><span class="id" title="inductive">trm</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <span class="id" title="keyword">Prop</span>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.13.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">(</span></a><span class="id" title="keyword">∀</span> <a id="n:25" class="idref" href="#n:25"><span class="id" title="binder">n</span></a>, <a class="idref" href="http://coq.inria.fr/distrib/V8.13.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">(</span></a><span class="id" title="keyword">∀</span> <a id="e:26" class="idref" href="#e:26"><span class="id" title="binder">e</span></a>, <a class="idref" href="GMuAnnot.Definitions.html#trm_size"><span class="id" title="definition">trm_size</span></a> <a class="idref" href="GMuAnnot.Prelude.html#e:26"><span class="id" title="variable">e</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.0/stdlib//Coq.Init.Peano.html#::nat_scope:x_'&lt;'_x"><span class="id" title="notation">&lt;</span></a> <a class="idref" href="GMuAnnot.Prelude.html#n:25"><span class="id" title="variable">n</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="GMuAnnot.Prelude.html#P:24"><span class="id" title="variable">P</span></a> <a class="idref" href="GMuAnnot.Prelude.html#e:26"><span class="id" title="variable">e</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.13.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <span class="id" title="keyword">∀</span> <a id="e:27" class="idref" href="#e:27"><span class="id" title="binder">e</span></a>, <a class="idref" href="GMuAnnot.Definitions.html#trm_size"><span class="id" title="definition">trm_size</span></a> <a class="idref" href="GMuAnnot.Prelude.html#e:27"><span class="id" title="variable">e</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="GMuAnnot.Prelude.html#n:25"><span class="id" title="variable">n</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="GMuAnnot.Prelude.html#P:24"><span class="id" title="variable">P</span></a> <a class="idref" href="GMuAnnot.Prelude.html#e:27"><span class="id" title="variable">e</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.13.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">∀</span> <a id="e:28" class="idref" href="#e:28"><span class="id" title="binder">e</span></a>, <a class="idref" href="GMuAnnot.Prelude.html#P:24"><span class="id" title="variable">P</span></a> <a class="idref" href="GMuAnnot.Prelude.html#e:28"><span class="id" title="variable">e</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">pose</span> (<span class="id" title="var">n</span> := <a class="idref" href="GMuAnnot.Definitions.html#trm_size"><span class="id" title="definition">trm_size</span></a> <span class="id" title="var">e</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="GMuAnnot.Prelude.html#strong_induction_on_term_size_helper"><span class="id" title="lemma">strong_induction_on_term_size_helper</span></a>; <span class="id" title="tactic">eauto</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="comment">(*&nbsp;TODO&nbsp;DRY&nbsp;*)</span><br/>
<span class="id" title="keyword">Lemma</span> <a id="strong_induction_on_type_size_helper" class="idref" href="#strong_induction_on_type_size_helper"><span class="id" title="lemma">strong_induction_on_type_size_helper</span></a> : <span class="id" title="keyword">∀</span> (<a id="P:29" class="idref" href="#P:29"><span class="id" title="binder">P</span></a> : <a class="idref" href="../lambda2Gmu/GMu.Definitions.html#typ"><span class="id" title="inductive">typ</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <span class="id" title="keyword">Prop</span>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.13.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">(</span></a><span class="id" title="keyword">∀</span> <a id="n:30" class="idref" href="#n:30"><span class="id" title="binder">n</span></a>, <a class="idref" href="http://coq.inria.fr/distrib/V8.13.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">(</span></a><span class="id" title="keyword">∀</span> <a id="e:31" class="idref" href="#e:31"><span class="id" title="binder">e</span></a>, <a class="idref" href="../lambda2Gmu/GMu.Definitions.html#typ_size"><span class="id" title="definition">typ_size</span></a> <a class="idref" href="GMuAnnot.Prelude.html#e:31"><span class="id" title="variable">e</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.0/stdlib//Coq.Init.Peano.html#::nat_scope:x_'&lt;'_x"><span class="id" title="notation">&lt;</span></a> <a class="idref" href="GMuAnnot.Prelude.html#n:30"><span class="id" title="variable">n</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="GMuAnnot.Prelude.html#P:29"><span class="id" title="variable">P</span></a> <a class="idref" href="GMuAnnot.Prelude.html#e:31"><span class="id" title="variable">e</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.13.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <span class="id" title="keyword">∀</span> <a id="e:32" class="idref" href="#e:32"><span class="id" title="binder">e</span></a>, <a class="idref" href="../lambda2Gmu/GMu.Definitions.html#typ_size"><span class="id" title="definition">typ_size</span></a> <a class="idref" href="GMuAnnot.Prelude.html#e:32"><span class="id" title="variable">e</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="GMuAnnot.Prelude.html#n:30"><span class="id" title="variable">n</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="GMuAnnot.Prelude.html#P:29"><span class="id" title="variable">P</span></a> <a class="idref" href="GMuAnnot.Prelude.html#e:32"><span class="id" title="variable">e</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.13.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">∀</span> <a id="n:33" class="idref" href="#n:33"><span class="id" title="binder">n</span></a> <a id="e:34" class="idref" href="#e:34"><span class="id" title="binder">e</span></a>, <a class="idref" href="../lambda2Gmu/GMu.Definitions.html#typ_size"><span class="id" title="definition">typ_size</span></a> <a class="idref" href="GMuAnnot.Prelude.html#e:34"><span class="id" title="variable">e</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="GMuAnnot.Prelude.html#n:33"><span class="id" title="variable">n</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="GMuAnnot.Prelude.html#P:29"><span class="id" title="variable">P</span></a> <a class="idref" href="GMuAnnot.Prelude.html#e:34"><span class="id" title="variable">e</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="var">introv</span> <span class="id" title="var">IH</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">lets</span> <span class="id" title="var">K</span>: <a class="idref" href="GMuAnnot.Prelude.html#strong_induction"><span class="id" title="lemma">strong_induction</span></a> (<span class="id" title="keyword">fun</span> <a id="n:37" class="idref" href="#n:37"><span class="id" title="binder">n</span></a> ⇒ <span class="id" title="keyword">∀</span> <a id="e:38" class="idref" href="#e:38"><span class="id" title="binder">e</span></a>, <a class="idref" href="../lambda2Gmu/GMu.Definitions.html#typ_size"><span class="id" title="definition">typ_size</span></a> <a class="idref" href="GMuAnnot.Prelude.html#e:36"><span class="id" title="variable">e</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="GMuAnnot.Prelude.html#n:35"><span class="id" title="variable">n</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <span class="id" title="var">P</span> <a class="idref" href="GMuAnnot.Prelude.html#e:36"><span class="id" title="variable">e</span></a>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">K</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">introv</span> <span class="id" title="var">IHk</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">lets</span> <span class="id" title="var">IHm</span>: <span class="id" title="var">IH</span> <span class="id" title="var">m</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">IHm</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <span class="id" title="var">IHk</span>; <span class="id" title="tactic">eauto</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="strong_induction_on_typ_size" class="idref" href="#strong_induction_on_typ_size"><span class="id" title="lemma">strong_induction_on_typ_size</span></a> : <span class="id" title="keyword">∀</span> (<a id="P:39" class="idref" href="#P:39"><span class="id" title="binder">P</span></a> : <a class="idref" href="../lambda2Gmu/GMu.Definitions.html#typ"><span class="id" title="inductive">typ</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <span class="id" title="keyword">Prop</span>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.13.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">(</span></a><span class="id" title="keyword">∀</span> <a id="n:40" class="idref" href="#n:40"><span class="id" title="binder">n</span></a>, <a class="idref" href="http://coq.inria.fr/distrib/V8.13.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">(</span></a><span class="id" title="keyword">∀</span> <a id="T:41" class="idref" href="#T:41"><span class="id" title="binder">T</span></a>, <a class="idref" href="../lambda2Gmu/GMu.Definitions.html#typ_size"><span class="id" title="definition">typ_size</span></a> <a class="idref" href="GMuAnnot.Prelude.html#T:41"><span class="id" title="variable">T</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.0/stdlib//Coq.Init.Peano.html#::nat_scope:x_'&lt;'_x"><span class="id" title="notation">&lt;</span></a> <a class="idref" href="GMuAnnot.Prelude.html#n:40"><span class="id" title="variable">n</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="GMuAnnot.Prelude.html#P:39"><span class="id" title="variable">P</span></a> <a class="idref" href="GMuAnnot.Prelude.html#T:41"><span class="id" title="variable">T</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.13.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <span class="id" title="keyword">∀</span> <a id="T:42" class="idref" href="#T:42"><span class="id" title="binder">T</span></a>, <a class="idref" href="../lambda2Gmu/GMu.Definitions.html#typ_size"><span class="id" title="definition">typ_size</span></a> <a class="idref" href="GMuAnnot.Prelude.html#T:42"><span class="id" title="variable">T</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="GMuAnnot.Prelude.html#n:40"><span class="id" title="variable">n</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="GMuAnnot.Prelude.html#P:39"><span class="id" title="variable">P</span></a> <a class="idref" href="GMuAnnot.Prelude.html#T:42"><span class="id" title="variable">T</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.13.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">∀</span> <a id="T:43" class="idref" href="#T:43"><span class="id" title="binder">T</span></a>, <a class="idref" href="GMuAnnot.Prelude.html#P:39"><span class="id" title="variable">P</span></a> <a class="idref" href="GMuAnnot.Prelude.html#T:43"><span class="id" title="variable">T</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">pose</span> (<span class="id" title="var">n</span> := <a class="idref" href="../lambda2Gmu/GMu.Definitions.html#typ_size"><span class="id" title="definition">typ_size</span></a> <span class="id" title="var">T</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="GMuAnnot.Prelude.html#strong_induction_on_type_size_helper"><span class="id" title="lemma">strong_induction_on_type_size_helper</span></a>; <span class="id" title="tactic">eauto</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="comment">(*&nbsp;<span class="comment">(**&nbsp;These&nbsp;tactics&nbsp;help&nbsp;applying&nbsp;a&nbsp;lemma&nbsp;which&nbsp;conclusion&nbsp;mentions&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;an&nbsp;environment&nbsp;(E&nbsp;&amp;&nbsp;F)&nbsp;in&nbsp;the&nbsp;particular&nbsp;case&nbsp;when&nbsp;F&nbsp;is&nbsp;empty&nbsp;*)</span>&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;Tactic&nbsp;Notation&nbsp;"apply_empty_bis"&nbsp;tactic(get_env)&nbsp;constr(lemma)&nbsp;:=&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;let&nbsp;E&nbsp;:=&nbsp;get_env&nbsp;in&nbsp;rewrite&nbsp;&lt;-&nbsp;(concat_empty&nbsp;E);&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;eapply&nbsp;lemma;&nbsp;try&nbsp;rewrite&nbsp;concat_empty.&nbsp;*)</span><br/>

<br/>
<span class="comment">(*&nbsp;Tactic&nbsp;Notation&nbsp;"apply_empty"&nbsp;constr(F)&nbsp;:=&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;apply_empty_bis&nbsp;(get_env)&nbsp;F.&nbsp;*)</span><br/>

<br/>
<span class="comment">(*&nbsp;Tactic&nbsp;Notation&nbsp;"apply_empty"&nbsp;"*"&nbsp;constr(F)&nbsp;:=&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;apply_empty&nbsp;F;&nbsp;auto*.&nbsp;*)</span><br/>

<br/>
<span class="id" title="keyword">Ltac</span> <span class="id" title="var">unsimpl_map_bind</span> :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="keyword">goal</span> <span class="id" title="keyword">with</span> |- <span class="id" title="keyword">context</span> [ ?<span class="id" title="var">B</span> (<a class="idref" href="../lambda2Gmu/GMu.Definitions.html#subst_tt"><span class="id" title="definition">subst_tt</span></a> ?<span class="id" title="var">Z</span> ?<span class="id" title="var">P</span> ?<span class="id" title="var">U</span>) ] ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">unsimpl</span> ((<a class="idref" href="../lambda2Gmu/GMu.Definitions.html#subst_tb"><span class="id" title="definition">subst_tb</span></a> <span class="id" title="var">Z</span> <span class="id" title="var">P</span>) (<span class="id" title="var">B</span> <span class="id" title="var">U</span>)) <span class="id" title="keyword">end</span>.<br/>

<br/>
<span class="id" title="keyword">Tactic Notation</span> "unsimpl_map_bind" "*" :=<br/>
&nbsp;&nbsp;<span class="id" title="var">unsimpl_map_bind</span>; <span class="id" title="var">auto_star</span>.<br/>

<br/>
<span class="comment">(*&nbsp;TODO&nbsp;make&nbsp;better&nbsp;names&nbsp;for&nbsp;map_id&nbsp;and&nbsp;ext_in_map&nbsp;*)</span><br/>
<span class="id" title="keyword">Lemma</span> <a id="map_id" class="idref" href="#map_id"><span class="id" title="lemma">map_id</span></a> : <span class="id" title="keyword">∀</span> (<a id="A:44" class="idref" href="#A:44"><span class="id" title="binder">A</span></a> : <span class="id" title="keyword">Type</span>) (<a id="f:45" class="idref" href="#f:45"><span class="id" title="binder">f</span></a> : <a class="idref" href="GMuAnnot.Prelude.html#A:44"><span class="id" title="variable">A</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="GMuAnnot.Prelude.html#A:44"><span class="id" title="variable">A</span></a>) (<a id="ls:46" class="idref" href="#ls:46"><span class="id" title="binder">ls</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.13.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="GMuAnnot.Prelude.html#A:44"><span class="id" title="variable">A</span></a>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.13.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">(</span></a><span class="id" title="keyword">∀</span> <a id="x:47" class="idref" href="#x:47"><span class="id" title="binder">x</span></a>, <a class="idref" href="http://coq.inria.fr/distrib/V8.13.0/stdlib//Coq.Lists.List.html#In"><span class="id" title="definition">List.In</span></a> <a class="idref" href="GMuAnnot.Prelude.html#x:47"><span class="id" title="variable">x</span></a> <a class="idref" href="GMuAnnot.Prelude.html#ls:46"><span class="id" title="variable">ls</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="GMuAnnot.Prelude.html#x:47"><span class="id" title="variable">x</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="GMuAnnot.Prelude.html#f:45"><span class="id" title="variable">f</span></a> <a class="idref" href="GMuAnnot.Prelude.html#x:47"><span class="id" title="variable">x</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.13.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="GMuAnnot.Prelude.html#ls:46"><span class="id" title="variable">ls</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.0/stdlib//Coq.Lists.List.html#map"><span class="id" title="definition">List.map</span></a> <a class="idref" href="GMuAnnot.Prelude.html#f:45"><span class="id" title="variable">f</span></a> <a class="idref" href="GMuAnnot.Prelude.html#ls:46"><span class="id" title="variable">ls</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="var">introv</span> <span class="id" title="var">feq</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">ls</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="var">cbn</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">feq</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">IHls</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;× <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;× <span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">feq</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span>× <a class="idref" href="http://coq.inria.fr/distrib/V8.13.0/stdlib//Coq.Lists.List.html#in_cons"><span class="id" title="lemma">List.in_cons</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">constructor</span>×.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="comment">(*&nbsp;adapted&nbsp;from&nbsp;a&nbsp;newer&nbsp;version&nbsp;of&nbsp;Coq&nbsp;stdlib:<br/>
https://github.com/coq/coq/blob/master/theories/Lists/List.v<br/>
*)</span><br/>
<span class="id" title="keyword">Lemma</span> <a id="ext_in_map" class="idref" href="#ext_in_map"><span class="id" title="lemma">ext_in_map</span></a> :<br/>
&nbsp;&nbsp;<span class="id" title="keyword">∀</span> (<a id="A:48" class="idref" href="#A:48"><span class="id" title="binder">A</span></a> <a id="B:49" class="idref" href="#B:49"><span class="id" title="binder">B</span></a> : <span class="id" title="keyword">Type</span>)(<a id="f:50" class="idref" href="#f:50"><span class="id" title="binder">f</span></a> <a id="g:51" class="idref" href="#g:51"><span class="id" title="binder">g</span></a>:<a class="idref" href="GMuAnnot.Prelude.html#A:48"><span class="id" title="variable">A</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.13.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><a class="idref" href="GMuAnnot.Prelude.html#B:49"><span class="id" title="variable">B</span></a>) <a id="l:52" class="idref" href="#l:52"><span class="id" title="binder">l</span></a>, <a class="idref" href="http://coq.inria.fr/distrib/V8.13.0/stdlib//Coq.Lists.List.html#map"><span class="id" title="definition">List.map</span></a> <a class="idref" href="GMuAnnot.Prelude.html#f:50"><span class="id" title="variable">f</span></a> <a class="idref" href="GMuAnnot.Prelude.html#l:52"><span class="id" title="variable">l</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.0/stdlib//Coq.Lists.List.html#map"><span class="id" title="definition">List.map</span></a> <a class="idref" href="GMuAnnot.Prelude.html#g:51"><span class="id" title="variable">g</span></a> <a class="idref" href="GMuAnnot.Prelude.html#l:52"><span class="id" title="variable">l</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <span class="id" title="keyword">∀</span> <a id="a:53" class="idref" href="#a:53"><span class="id" title="binder">a</span></a>, <a class="idref" href="http://coq.inria.fr/distrib/V8.13.0/stdlib//Coq.Lists.List.html#In"><span class="id" title="definition">List.In</span></a> <a class="idref" href="GMuAnnot.Prelude.html#a:53"><span class="id" title="variable">a</span></a> <a class="idref" href="GMuAnnot.Prelude.html#l:52"><span class="id" title="variable">l</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="GMuAnnot.Prelude.html#f:50"><span class="id" title="variable">f</span></a> <a class="idref" href="GMuAnnot.Prelude.html#a:53"><span class="id" title="variable">a</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="GMuAnnot.Prelude.html#g:51"><span class="id" title="variable">g</span></a> <a class="idref" href="GMuAnnot.Prelude.html#a:53"><span class="id" title="variable">a</span></a>.<br/>
<span class="id" title="keyword">Proof</span>. <span class="id" title="tactic">induction</span> <span class="id" title="var">l</span>; <span class="id" title="tactic">intros</span> [=] ? []; <span class="id" title="tactic">subst</span>; <span class="id" title="tactic">auto</span>. <span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Ltac</span> <span class="id" title="var">crush_open</span> :=<br/>
&nbsp;&nbsp;(<span class="id" title="tactic">try</span> <span class="id" title="tactic">unfold</span> <a class="idref" href="../lambda2Gmu/GMu.Definitions.html#open_tt"><span class="id" title="definition">open_tt</span></a>); (<span class="id" title="tactic">try</span> <span class="id" title="tactic">unfold</span> <a class="idref" href="../lambda2Gmu/GMu.Definitions.html#open_tt_rec"><span class="id" title="definition">open_tt_rec</span></a>); <span class="id" title="var">crush_compare</span>.<br/>

<br/>
#[<span class="id" title="var">export</span>] <span class="id" title="keyword">Hint</span> <span class="id" title="keyword">Immediate</span> <span class="id" title="var">subset_refl</span> <span class="id" title="var">subset_empty_l</span> <span class="id" title="var">subset_union_weak_l</span> <span class="id" title="var">subset_union_weak_r</span> <span class="id" title="var">subset_union_2</span> <span class="id" title="var">union_comm</span> <span class="id" title="var">union_assoc</span> <span class="id" title="var">union_same</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="union_distribute" class="idref" href="#union_distribute"><span class="id" title="lemma">union_distribute</span></a> : <span class="id" title="keyword">∀</span> <a id="T:54" class="idref" href="#T:54"><span class="id" title="binder">T</span></a> (<a id="A:55" class="idref" href="#A:55"><span class="id" title="binder">A</span></a> <a id="B:56" class="idref" href="#B:56"><span class="id" title="binder">B</span></a> <a id="C:57" class="idref" href="#C:57"><span class="id" title="binder">C</span></a> : <span class="id" title="axiom">fset</span> <a class="idref" href="GMuAnnot.Prelude.html#T:54"><span class="id" title="variable">T</span></a>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">(</span><a class="idref" href="GMuAnnot.Prelude.html#A:55"><span class="id" title="variable">A</span></a> <span class="id" title="notation">\</span><span class="id" title="notation">u</span> <a class="idref" href="GMuAnnot.Prelude.html#B:56"><span class="id" title="variable">B</span></a><span class="id" title="notation">)</span> <span class="id" title="notation">\</span><span class="id" title="notation">u</span> <a class="idref" href="GMuAnnot.Prelude.html#C:57"><span class="id" title="variable">C</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <span class="id" title="notation">(</span><a class="idref" href="GMuAnnot.Prelude.html#A:55"><span class="id" title="variable">A</span></a> <span class="id" title="notation">\</span><span class="id" title="notation">u</span> <a class="idref" href="GMuAnnot.Prelude.html#C:57"><span class="id" title="variable">C</span></a><span class="id" title="notation">)</span> <span class="id" title="notation">\</span><span class="id" title="notation">u</span> <span class="id" title="notation">(</span><a class="idref" href="GMuAnnot.Prelude.html#B:56"><span class="id" title="variable">B</span></a> <span class="id" title="notation">\</span><span class="id" title="notation">u</span> <a class="idref" href="GMuAnnot.Prelude.html#C:57"><span class="id" title="variable">C</span></a><span class="id" title="notation">)</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">CuC</span>: <span class="id" title="var">C</span> <span class="id" title="notation">\</span><span class="id" title="notation">u</span> <span class="id" title="var">C</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <span class="id" title="var">C</span>); <span class="id" title="tactic">try</span> <span class="id" title="tactic">apply</span> <span class="id" title="lemma">union_same</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">CuC</span> <span class="id" title="tactic">at</span> 1.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="lemma">union_assoc</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="lemma">union_comm</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="lemma">union_assoc</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="lemma">union_assoc</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="lemma">union_comm</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">CuA</span>: <span class="id" title="var">C</span> <span class="id" title="notation">\</span><span class="id" title="notation">u</span> <span class="id" title="var">A</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <span class="id" title="var">A</span> <span class="id" title="notation">\</span><span class="id" title="notation">u</span> <span class="id" title="var">C</span>); <span class="id" title="tactic">try</span> <span class="id" title="tactic">apply</span> <span class="id" title="lemma">union_comm</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span>× <span class="id" title="var">CuA</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="union_fold_detach" class="idref" href="#union_fold_detach"><span class="id" title="lemma">union_fold_detach</span></a> : <span class="id" title="keyword">∀</span> <a id="B:58" class="idref" href="#B:58"><span class="id" title="binder">B</span></a> (<a id="ls:59" class="idref" href="#ls:59"><span class="id" title="binder">ls</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.13.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="GMuAnnot.Prelude.html#B:58"><span class="id" title="variable">B</span></a>) (<a id="P:60" class="idref" href="#P:60"><span class="id" title="binder">P</span></a> : <a class="idref" href="GMuAnnot.Prelude.html#B:58"><span class="id" title="variable">B</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <span class="id" title="axiom">fset</span> <span class="id" title="axiom">var</span>) (<a id="z:61" class="idref" href="#z:61"><span class="id" title="binder">z</span></a> : <span class="id" title="axiom">fset</span> <span class="id" title="axiom">var</span>) (<a id="z':62" class="idref" href="#z':62"><span class="id" title="binder">z'</span></a> : <span class="id" title="axiom">fset</span> <span class="id" title="axiom">var</span>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.13.0/stdlib//Coq.Lists.List.html#fold_left"><span class="id" title="definition">List.fold_left</span></a> (<span class="id" title="keyword">fun</span> (<a id="a:63" class="idref" href="#a:63"><span class="id" title="binder">a</span></a> : <span class="id" title="axiom">fset</span> <span class="id" title="axiom">var</span>) (<a id="b:64" class="idref" href="#b:64"><span class="id" title="binder">b</span></a> : <a class="idref" href="GMuAnnot.Prelude.html#B:58"><span class="id" title="variable">B</span></a>) ⇒ <a class="idref" href="GMuAnnot.Prelude.html#a:63"><span class="id" title="variable">a</span></a> <span class="id" title="notation">\</span><span class="id" title="notation">u</span> <a class="idref" href="GMuAnnot.Prelude.html#P:60"><span class="id" title="variable">P</span></a> <a class="idref" href="GMuAnnot.Prelude.html#b:64"><span class="id" title="variable">b</span></a>) <a class="idref" href="GMuAnnot.Prelude.html#ls:59"><span class="id" title="variable">ls</span></a> (<a class="idref" href="GMuAnnot.Prelude.html#z:61"><span class="id" title="variable">z</span></a> <span class="id" title="notation">\</span><span class="id" title="notation">u</span> <a class="idref" href="GMuAnnot.Prelude.html#z':62"><span class="id" title="variable">z'</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.13.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.13.0/stdlib//Coq.Lists.List.html#fold_left"><span class="id" title="definition">List.fold_left</span></a> (<span class="id" title="keyword">fun</span> (<a id="a:65" class="idref" href="#a:65"><span class="id" title="binder">a</span></a> : <span class="id" title="axiom">fset</span> <span class="id" title="axiom">var</span>) (<a id="b:66" class="idref" href="#b:66"><span class="id" title="binder">b</span></a> : <a class="idref" href="GMuAnnot.Prelude.html#B:58"><span class="id" title="variable">B</span></a>) ⇒ <a class="idref" href="GMuAnnot.Prelude.html#a:65"><span class="id" title="variable">a</span></a> <span class="id" title="notation">\</span><span class="id" title="notation">u</span> <a class="idref" href="GMuAnnot.Prelude.html#P:60"><span class="id" title="variable">P</span></a> <a class="idref" href="GMuAnnot.Prelude.html#b:66"><span class="id" title="variable">b</span></a>) <a class="idref" href="GMuAnnot.Prelude.html#ls:59"><span class="id" title="variable">ls</span></a> <a class="idref" href="GMuAnnot.Prelude.html#z:61"><span class="id" title="variable">z</span></a> <span class="id" title="notation">\</span><span class="id" title="notation">u</span> <a class="idref" href="GMuAnnot.Prelude.html#z':62"><span class="id" title="variable">z'</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">ls</span>; <span class="id" title="var">introv</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="var">cbn</span>. <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="var">cbn</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">Horder</span>: <a class="idref" href="http://coq.inria.fr/distrib/V8.13.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">(</span></a><span class="id" title="notation">(</span><span class="id" title="var">z</span> <span class="id" title="notation">\</span><span class="id" title="notation">u</span> <span class="id" title="var">z'</span><span class="id" title="notation">)</span> <span class="id" title="notation">\</span><span class="id" title="notation">u</span> <span class="id" title="var">P</span> <span class="id" title="var">a</span><a class="idref" href="http://coq.inria.fr/distrib/V8.13.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">(</span></a><span class="id" title="notation">(</span><span class="id" title="var">z</span> <span class="id" title="notation">\</span><span class="id" title="notation">u</span> <span class="id" title="var">P</span> <span class="id" title="var">a</span><span class="id" title="notation">)</span> <span class="id" title="notation">\</span><span class="id" title="notation">u</span> <span class="id" title="var">z'</span><a class="idref" href="http://coq.inria.fr/distrib/V8.13.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">)</span></a>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">rewrite</span> <span class="id" title="lemma">union_comm</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="lemma">union_assoc</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<span class="id" title="lemma">union_comm</span> (<span class="id" title="var">P</span> <span class="id" title="var">a</span>) <span class="id" title="var">z</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">rewrite</span> <span class="id" title="var">Horder</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span>× <span class="id" title="var">IHls</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Ltac</span> <span class="id" title="var">expand_env_empty</span> <span class="id" title="var">E</span> :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">HE</span> := <span class="id" title="tactic">fresh</span> "HE" <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">HE</span>: <span class="id" title="var">E</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <span class="id" title="var">E</span> <span class="id" title="notation">&amp;</span> <span class="id" title="axiom">empty</span>); [<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span>× <span class="id" title="lemma">concat_empty_r</span><br/>
&nbsp;&nbsp;| <span class="id" title="tactic">rewrite</span> <span class="id" title="var">HE</span> ].<br/>

<br/>
<span class="id" title="keyword">Ltac</span> <span class="id" title="var">fold_env_empty</span> :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="keyword">goal</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| |- <span class="id" title="keyword">context</span> [?<span class="id" title="var">E</span> <span class="id" title="notation">&amp;</span> <span class="id" title="axiom">empty</span>] ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">HE</span> := <span class="id" title="tactic">fresh</span> "HE" <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">HE</span>: <span class="id" title="var">E</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <span class="id" title="var">E</span> <span class="id" title="notation">&amp;</span> <span class="id" title="axiom">empty</span>); [<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span>× <span class="id" title="lemma">concat_empty_r</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="tactic">rewrite</span>× &lt;- <span class="id" title="var">HE</span> ]<br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
<span class="id" title="keyword">Ltac</span> <span class="id" title="var">fold_env_empty_H</span> :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="keyword">goal</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| <span class="id" title="var">H</span>: <span class="id" title="keyword">context</span> [?<span class="id" title="var">E</span> <span class="id" title="notation">&amp;</span> <span class="id" title="axiom">empty</span>] |- <span class="id" title="var">_</span> ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">HE</span> := <span class="id" title="tactic">fresh</span> "HE" <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">HE</span>: <span class="id" title="var">E</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <span class="id" title="var">E</span> <span class="id" title="notation">&amp;</span> <span class="id" title="axiom">empty</span>); [<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span>× <span class="id" title="lemma">concat_empty_r</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="tactic">rewrite</span>× &lt;- <span class="id" title="var">HE</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>]<br/>
&nbsp;&nbsp;| <span class="id" title="var">H</span>: <span class="id" title="keyword">context</span> [<span class="id" title="axiom">empty</span> <span class="id" title="notation">&amp;</span> ?<span class="id" title="var">E</span>] |- <span class="id" title="var">_</span> ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">HE</span> := <span class="id" title="tactic">fresh</span> "HE" <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">HE</span>: <span class="id" title="var">E</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <span class="id" title="axiom">empty</span> <span class="id" title="notation">&amp;</span> <span class="id" title="var">E</span>); [<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span>× <span class="id" title="lemma">concat_empty_l</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="tactic">rewrite</span>× &lt;- <span class="id" title="var">HE</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>]<br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
<span class="id" title="keyword">Ltac</span> <span class="id" title="var">copy</span> <span class="id" title="var">H</span> :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">H'</span> := <span class="id" title="tactic">fresh</span> <span class="id" title="var">H</span> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">Heq</span> := <span class="id" title="tactic">fresh</span> "EQ" <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;<span class="id" title="var">remember</span> <span class="id" title="var">H</span> <span class="id" title="keyword">as</span> <span class="id" title="var">H'</span> <span class="id" title="var">eqn</span>:<span class="id" title="var">Heq</span>; <span class="id" title="tactic">clear</span> <span class="id" title="var">Heq</span>.<br/>

<br/>
<span class="id" title="keyword">Ltac</span> <span class="id" title="var">copyTo</span> <span class="id" title="var">H</span> <span class="id" title="var">Hto</span> :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">H'</span> := <span class="id" title="tactic">fresh</span> <span class="id" title="var">Hto</span> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">Heq</span> := <span class="id" title="tactic">fresh</span> "EQ" <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;<span class="id" title="var">remember</span> <span class="id" title="var">H</span> <span class="id" title="keyword">as</span> <span class="id" title="var">H'</span> <span class="id" title="var">eqn</span>:<span class="id" title="var">Heq</span>; <span class="id" title="tactic">clear</span> <span class="id" title="var">Heq</span>.<br/>

<br/>
<span class="id" title="keyword">Ltac</span> <span class="id" title="var">apply_folding</span> <span class="id" title="var">E</span> <span class="id" title="var">lemma</span> :=<br/>
&nbsp;&nbsp;<span class="id" title="var">expand_env_empty</span> <span class="id" title="var">E</span>; <span class="id" title="tactic">apply</span>× <span class="id" title="var">lemma</span>; <span class="id" title="var">fold_env_empty</span>.<br/>

<br/>
<span class="id" title="keyword">Ltac</span> <span class="id" title="var">add_notin</span> <span class="id" title="var">x</span> <span class="id" title="var">L</span> :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">Fr</span> := <span class="id" title="tactic">fresh</span> "Fr" <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">Fr</span>: <span class="id" title="var">x</span> <span class="id" title="notation">\</span><span class="id" title="notation">notin</span> <span class="id" title="var">L</span>); <span class="id" title="tactic">auto</span>.<br/>

<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <span class="id" title="library">TLC.LibFset</span> <span class="id" title="library">TLC.LibList</span>.<br/>
<span class="comment">(*&nbsp;different&nbsp;Fset&nbsp;impl?&nbsp;taken&nbsp;from&nbsp;repo:&nbsp;*)</span><br/>
<span class="id" title="keyword">Lemma</span> <a id="from_list_spec" class="idref" href="#from_list_spec"><span class="id" title="lemma">from_list_spec</span></a> : <span class="id" title="keyword">∀</span> <a id="A:67" class="idref" href="#A:67"><span class="id" title="binder">A</span></a> (<a id="x:68" class="idref" href="#x:68"><span class="id" title="binder">x</span></a> : <a class="idref" href="GMuAnnot.Prelude.html#A:67"><span class="id" title="variable">A</span></a>) <a id="L:69" class="idref" href="#L:69"><span class="id" title="binder">L</span></a>,<br/>
&nbsp;&nbsp;<a class="idref" href="GMuAnnot.Prelude.html#x:68"><span class="id" title="variable">x</span></a> <span class="id" title="notation">\</span><span class="id" title="notation">in</span> <span class="id" title="definition">from_list</span> <a class="idref" href="GMuAnnot.Prelude.html#L:69"><span class="id" title="variable">L</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <span class="id" title="inductive">LibList.mem</span> <a class="idref" href="GMuAnnot.Prelude.html#x:68"><span class="id" title="variable">x</span></a> <a class="idref" href="GMuAnnot.Prelude.html#L:69"><span class="id" title="variable">L</span></a>.<br/>
<span class="id" title="keyword">Proof</span> <span class="id" title="keyword">using</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <span class="id" title="definition">from_list</span>. <span class="id" title="tactic">induction</span> <span class="id" title="var">L</span>; <span class="id" title="var">rew_listx</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">rewrite</span> <span class="id" title="axiom">in_empty</span>. <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">rewrite</span> <span class="id" title="axiom">in_union</span>, <span class="id" title="axiom">in_singleton</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intro</span> <span class="id" title="var">HH</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">HH</span>; <span class="id" title="tactic">eauto</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="from_list_spec2" class="idref" href="#from_list_spec2"><span class="id" title="lemma">from_list_spec2</span></a> : <span class="id" title="keyword">∀</span> <a id="A:70" class="idref" href="#A:70"><span class="id" title="binder">A</span></a> (<a id="x:71" class="idref" href="#x:71"><span class="id" title="binder">x</span></a> : <a class="idref" href="GMuAnnot.Prelude.html#A:70"><span class="id" title="variable">A</span></a>) <a id="L:72" class="idref" href="#L:72"><span class="id" title="binder">L</span></a>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.13.0/stdlib//Coq.Lists.List.html#In"><span class="id" title="definition">List.In</span></a> <a class="idref" href="GMuAnnot.Prelude.html#x:71"><span class="id" title="variable">x</span></a> <a class="idref" href="GMuAnnot.Prelude.html#L:72"><span class="id" title="variable">L</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="GMuAnnot.Prelude.html#x:71"><span class="id" title="variable">x</span></a> <span class="id" title="notation">\</span><span class="id" title="notation">in</span> <span class="id" title="definition">from_list</span> <a class="idref" href="GMuAnnot.Prelude.html#L:72"><span class="id" title="variable">L</span></a>.<br/>
<span class="id" title="keyword">Proof</span> <span class="id" title="keyword">using</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <span class="id" title="definition">from_list</span>. <span class="id" title="tactic">induction</span> <span class="id" title="var">L</span>; <span class="id" title="var">rew_listx</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">rewrite</span> <span class="id" title="axiom">in_empty</span>. <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">rewrite</span> <span class="id" title="axiom">in_union</span>, <span class="id" title="axiom">in_singleton</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intro</span> <span class="id" title="var">HH</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">HH</span>; <span class="id" title="tactic">eauto</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="exist_alphas" class="idref" href="#exist_alphas"><span class="id" title="lemma">exist_alphas</span></a> : <span class="id" title="keyword">∀</span> <a id="L:73" class="idref" href="#L:73"><span class="id" title="binder">L</span></a> <a id="len:74" class="idref" href="#len:74"><span class="id" title="binder">len</span></a>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.13.0/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">∃</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.0/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">(</span></a><a id="Alphas:75" class="idref" href="#Alphas:75"><span class="id" title="binder">Alphas</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.13.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <span class="id" title="axiom">var</span><a class="idref" href="http://coq.inria.fr/distrib/V8.13.0/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">),</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.13.0/stdlib//Coq.Lists.List.html#length"><span class="id" title="abbreviation">List.length</span></a> <a class="idref" href="GMuAnnot.Prelude.html#Alphas:75"><span class="id" title="variable">Alphas</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="GMuAnnot.Prelude.html#len:74"><span class="id" title="variable">len</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.0/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">∧</span></a> <a class="idref" href="../lambda2Gmu/GMu.Definitions.html#DistinctList"><span class="id" title="inductive">DistinctList</span></a> <a class="idref" href="GMuAnnot.Prelude.html#Alphas:75"><span class="id" title="variable">Alphas</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.0/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">∧</span></a> <span class="id" title="keyword">∀</span> <a id="A:76" class="idref" href="#A:76"><span class="id" title="binder">A</span></a>, <a class="idref" href="http://coq.inria.fr/distrib/V8.13.0/stdlib//Coq.Lists.List.html#In"><span class="id" title="definition">List.In</span></a> <a class="idref" href="GMuAnnot.Prelude.html#A:76"><span class="id" title="variable">A</span></a> <a class="idref" href="GMuAnnot.Prelude.html#Alphas:75"><span class="id" title="variable">Alphas</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="GMuAnnot.Prelude.html#A:76"><span class="id" title="variable">A</span></a> <span class="id" title="notation">\</span><span class="id" title="notation">notin</span> <a class="idref" href="GMuAnnot.Prelude.html#L:73"><span class="id" title="variable">L</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">len</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">∃</span> (@<a class="idref" href="http://coq.inria.fr/distrib/V8.13.0/stdlib//Coq.Lists.List.html#nil"><span class="id" title="abbreviation">List.nil</span></a> <span class="id" title="axiom">var</span>). <span class="id" title="var">splits</span>×.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">econstructor</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">intuition</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">inversion</span> <span class="id" title="var">IHlen</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">Alphas'</span> [<span class="id" title="var">Hlen</span> [<span class="id" title="var">Hdis</span> <span class="id" title="var">Hnot</span>]]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">pick_fresh</span> <span class="id" title="var">A</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">∃</span> (<a class="idref" href="http://coq.inria.fr/distrib/V8.13.0/stdlib//Coq.Lists.List.html#cons"><span class="id" title="abbreviation">List.cons</span></a> <span class="id" title="var">A</span> <span class="id" title="var">Alphas'</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">splits</span>×.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="var">cbn</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">constructor</span>×.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intro</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">Hnot2</span>: <span class="id" title="var">A</span> <span class="id" title="notation">\</span><span class="id" title="notation">notin</span> <span class="id" title="definition">from_list</span> <span class="id" title="var">Alphas'</span>); <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">Hnot2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span>× <a class="idref" href="GMuAnnot.Prelude.html#from_list_spec2"><span class="id" title="lemma">from_list_spec2</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="var">introv</span> <span class="id" title="var">AiA</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">inversions</span> <span class="id" title="var">AiA</span>; <span class="id" title="tactic">eauto</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Global Transparent</span> <span class="id" title="definition">fold_right</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="length_equality" class="idref" href="#length_equality"><span class="id" title="lemma">length_equality</span></a> : <span class="id" title="keyword">∀</span> <a id="A:77" class="idref" href="#A:77"><span class="id" title="binder">A</span></a> (<a id="a:78" class="idref" href="#a:78"><span class="id" title="binder">a</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.13.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="GMuAnnot.Prelude.html#A:77"><span class="id" title="variable">A</span></a>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="definition">LibList.length</span> <a class="idref" href="GMuAnnot.Prelude.html#a:78"><span class="id" title="variable">a</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.0/stdlib//Coq.Init.Datatypes.html#length"><span class="id" title="definition">Datatypes.length</span></a> <a class="idref" href="GMuAnnot.Prelude.html#a:78"><span class="id" title="variable">a</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">a</span>; <span class="id" title="var">cbn</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">IHa</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="lemma">length_cons</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">lia</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="comment">(*&nbsp;stdlib&nbsp;lemma&nbsp;but&nbsp;in&nbsp;TLC&nbsp;version&nbsp;*)</span><br/>
<span class="id" title="keyword">Lemma</span> <a id="map_map" class="idref" href="#map_map"><span class="id" title="lemma">map_map</span></a> : <span class="id" title="keyword">∀</span> (<a id="A:79" class="idref" href="#A:79"><span class="id" title="binder">A</span></a> <a id="B:80" class="idref" href="#B:80"><span class="id" title="binder">B</span></a> <a id="C:81" class="idref" href="#C:81"><span class="id" title="binder">C</span></a>:<span class="id" title="keyword">Type</span>)(<a id="f:82" class="idref" href="#f:82"><span class="id" title="binder">f</span></a>:<a class="idref" href="GMuAnnot.Prelude.html#A:79"><span class="id" title="variable">A</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.13.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><a class="idref" href="GMuAnnot.Prelude.html#B:80"><span class="id" title="variable">B</span></a>)(<a id="g:83" class="idref" href="#g:83"><span class="id" title="binder">g</span></a>:<a class="idref" href="GMuAnnot.Prelude.html#B:80"><span class="id" title="variable">B</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.13.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><a class="idref" href="GMuAnnot.Prelude.html#C:81"><span class="id" title="variable">C</span></a>) <a id="l:84" class="idref" href="#l:84"><span class="id" title="binder">l</span></a>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="definition">map</span> <a class="idref" href="GMuAnnot.Prelude.html#g:83"><span class="id" title="variable">g</span></a> (<span class="id" title="definition">map</span> <a class="idref" href="GMuAnnot.Prelude.html#f:82"><span class="id" title="variable">f</span></a> <a class="idref" href="GMuAnnot.Prelude.html#l:84"><span class="id" title="variable">l</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.13.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <span class="id" title="definition">map</span> (<span class="id" title="keyword">fun</span> <a id="x:85" class="idref" href="#x:85"><span class="id" title="binder">x</span></a> ⇒ <a class="idref" href="GMuAnnot.Prelude.html#g:83"><span class="id" title="variable">g</span></a> (<a class="idref" href="GMuAnnot.Prelude.html#f:82"><span class="id" title="variable">f</span></a> <a class="idref" href="GMuAnnot.Prelude.html#x:85"><span class="id" title="variable">x</span></a>)) <a class="idref" href="GMuAnnot.Prelude.html#l:84"><span class="id" title="variable">l</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">l</span>; <span class="id" title="var">cbn</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">repeat</span> <span class="id" title="tactic">rewrite</span> <span class="id" title="lemma">map_cons</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">f_equal</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">auto</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="eq_dec_var" class="idref" href="#eq_dec_var"><span class="id" title="lemma">eq_dec_var</span></a> (<a id="x:86" class="idref" href="#x:86"><span class="id" title="binder">x</span></a> <a id="y:87" class="idref" href="#y:87"><span class="id" title="binder">y</span></a> : <span class="id" title="axiom">var</span>) : <a class="idref" href="GMuAnnot.Prelude.html#x:86"><span class="id" title="variable">x</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="GMuAnnot.Prelude.html#y:87"><span class="id" title="variable">y</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.0/stdlib//Coq.Init.Logic.html#f031fe1957c4a4a8e217aa46af2b4e25"><span class="id" title="notation">∨</span></a> <a class="idref" href="GMuAnnot.Prelude.html#x:86"><span class="id" title="variable">x</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'&lt;&gt;'_x"><span class="id" title="notation">≠</span></a> <a class="idref" href="GMuAnnot.Prelude.html#y:87"><span class="id" title="variable">y</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="var">lets</span>: <span class="id" title="axiom">var_compare_eq</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <span class="id" title="library">TLC.LibReflect</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="axiom">var_compare</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span>);<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="lemma">isTrue_eq_if</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>;<br/>
&nbsp;&nbsp;<span class="id" title="var">case_if</span>; <span class="id" title="tactic">auto</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="JMeq_from_eq" class="idref" href="#JMeq_from_eq"><span class="id" title="lemma">JMeq_from_eq</span></a> : <span class="id" title="keyword">∀</span> <a id="T:88" class="idref" href="#T:88"><span class="id" title="binder">T</span></a> (<a id="x:89" class="idref" href="#x:89"><span class="id" title="binder">x</span></a> <a id="y:90" class="idref" href="#y:90"><span class="id" title="binder">y</span></a> : <a class="idref" href="GMuAnnot.Prelude.html#T:88"><span class="id" title="variable">T</span></a>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="GMuAnnot.Prelude.html#x:89"><span class="id" title="variable">x</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="GMuAnnot.Prelude.html#y:90"><span class="id" title="variable">y</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.0/stdlib//Coq.Logic.JMeq.html#JMeq"><span class="id" title="inductive">JMeq.JMeq</span></a> <a class="idref" href="GMuAnnot.Prelude.html#x:89"><span class="id" title="variable">x</span></a> <a class="idref" href="GMuAnnot.Prelude.html#y:90"><span class="id" title="variable">y</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="var">introv</span> <span class="id" title="var">EQ</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">EQ</span>. <span class="id" title="tactic">trivial</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="split_notin_subset_union" class="idref" href="#split_notin_subset_union"><span class="id" title="lemma">split_notin_subset_union</span></a> : <span class="id" title="keyword">∀</span> <a id="T:91" class="idref" href="#T:91"><span class="id" title="binder">T</span></a> (<a id="x:92" class="idref" href="#x:92"><span class="id" title="binder">x</span></a> : <a class="idref" href="GMuAnnot.Prelude.html#T:91"><span class="id" title="variable">T</span></a>) <a id="A:93" class="idref" href="#A:93"><span class="id" title="binder">A</span></a> <a id="B:94" class="idref" href="#B:94"><span class="id" title="binder">B</span></a> <a id="C:95" class="idref" href="#C:95"><span class="id" title="binder">C</span></a>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="GMuAnnot.Prelude.html#A:93"><span class="id" title="variable">A</span></a> <span class="id" title="notation">\</span><span class="id" title="notation">c</span> <a class="idref" href="GMuAnnot.Prelude.html#B:94"><span class="id" title="variable">B</span></a> <span class="id" title="notation">\</span><span class="id" title="notation">u</span> <a class="idref" href="GMuAnnot.Prelude.html#C:95"><span class="id" title="variable">C</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="GMuAnnot.Prelude.html#x:92"><span class="id" title="variable">x</span></a> <span class="id" title="notation">\</span><span class="id" title="notation">notin</span> <a class="idref" href="GMuAnnot.Prelude.html#B:94"><span class="id" title="variable">B</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="GMuAnnot.Prelude.html#x:92"><span class="id" title="variable">x</span></a> <span class="id" title="notation">\</span><span class="id" title="notation">notin</span> <a class="idref" href="GMuAnnot.Prelude.html#C:95"><span class="id" title="variable">C</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="GMuAnnot.Prelude.html#x:92"><span class="id" title="variable">x</span></a> <span class="id" title="notation">\</span><span class="id" title="notation">notin</span> <a class="idref" href="GMuAnnot.Prelude.html#A:93"><span class="id" title="variable">A</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="var">introv</span> <span class="id" title="var">Hsub</span> <span class="id" title="var">HB</span> <span class="id" title="var">HC</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intro</span> <span class="id" title="var">inA</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">lets</span> <span class="id" title="var">Hf</span>: <span class="id" title="var">Hsub</span> <span class="id" title="var">inA</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="axiom">in_union</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hf</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">Hf</span>; <span class="id" title="tactic">eauto</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="in_from_list" class="idref" href="#in_from_list"><span class="id" title="lemma">in_from_list</span></a> : <span class="id" title="keyword">∀</span> <a id="As:96" class="idref" href="#As:96"><span class="id" title="binder">As</span></a> (<a id="x:97" class="idref" href="#x:97"><span class="id" title="binder">x</span></a> : <span class="id" title="axiom">var</span>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="GMuAnnot.Prelude.html#x:97"><span class="id" title="variable">x</span></a> <span class="id" title="notation">\</span><span class="id" title="notation">in</span> <span class="id" title="definition">from_list</span> <a class="idref" href="GMuAnnot.Prelude.html#As:96"><span class="id" title="variable">As</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.13.0/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">∃</span></a> <a id="A:98" class="idref" href="#A:98"><span class="id" title="binder">A</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.13.0/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">,</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.0/stdlib//Coq.Lists.List.html#In"><span class="id" title="definition">List.In</span></a> <a class="idref" href="GMuAnnot.Prelude.html#A:98"><span class="id" title="variable">A</span></a> <a class="idref" href="GMuAnnot.Prelude.html#As:96"><span class="id" title="variable">As</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.0/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">∧</span></a> <a class="idref" href="GMuAnnot.Prelude.html#x:97"><span class="id" title="variable">x</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="GMuAnnot.Prelude.html#A:98"><span class="id" title="variable">A</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">As</span>; <span class="id" title="var">introv</span> <span class="id" title="var">xin</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> <span class="id" title="var">xin</span>. <span class="id" title="var">exfalso</span>; <span class="id" title="tactic">apply</span>× <span class="id" title="lemma">in_empty_inv</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> ×.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">fold</span> (<span class="id" title="definition">from_list</span> <span class="id" title="var">As</span>) <span class="id" title="tactic">in</span> <span class="id" title="var">xin</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="axiom">in_union</span> <span class="id" title="tactic">in</span> <span class="id" title="var">xin</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">xin</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">xin</span> | <span class="id" title="var">xin</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">rewrite</span> <span class="id" title="axiom">in_singleton</span> <span class="id" title="tactic">in</span> <span class="id" title="var">xin</span>. <span class="id" title="tactic">subst</span>. <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="var">lets</span> [<span class="id" title="var">A</span> <span class="id" title="var">Ain</span>]: <span class="id" title="var">IHAs</span> <span class="id" title="var">xin</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">∃</span> <span class="id" title="var">A</span>. <span class="id" title="tactic">split</span>×.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="env_map_compose" class="idref" href="#env_map_compose"><span class="id" title="lemma">env_map_compose</span></a> : <span class="id" title="keyword">∀</span> <a id="A:99" class="idref" href="#A:99"><span class="id" title="binder">A</span></a> <a id="B:100" class="idref" href="#B:100"><span class="id" title="binder">B</span></a> <a id="C:101" class="idref" href="#C:101"><span class="id" title="binder">C</span></a> (<a id="E:102" class="idref" href="#E:102"><span class="id" title="binder">E</span></a> : <span class="id" title="definition">env</span> <a class="idref" href="GMuAnnot.Prelude.html#A:99"><span class="id" title="variable">A</span></a>) (<a id="f:103" class="idref" href="#f:103"><span class="id" title="binder">f</span></a> : <a class="idref" href="GMuAnnot.Prelude.html#A:99"><span class="id" title="variable">A</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="GMuAnnot.Prelude.html#B:100"><span class="id" title="variable">B</span></a>) (<a id="g:104" class="idref" href="#g:104"><span class="id" title="binder">g</span></a> : <a class="idref" href="GMuAnnot.Prelude.html#B:100"><span class="id" title="variable">B</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="GMuAnnot.Prelude.html#C:101"><span class="id" title="variable">C</span></a>) (<a id="h:105" class="idref" href="#h:105"><span class="id" title="binder">h</span></a> : <a class="idref" href="GMuAnnot.Prelude.html#A:99"><span class="id" title="variable">A</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="GMuAnnot.Prelude.html#C:101"><span class="id" title="variable">C</span></a>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.13.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">(</span></a><span class="id" title="keyword">∀</span> <a id="x:106" class="idref" href="#x:106"><span class="id" title="binder">x</span></a>, <a class="idref" href="GMuAnnot.Prelude.html#g:104"><span class="id" title="variable">g</span></a> (<a class="idref" href="GMuAnnot.Prelude.html#f:103"><span class="id" title="variable">f</span></a> <a class="idref" href="GMuAnnot.Prelude.html#x:106"><span class="id" title="variable">x</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.13.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="GMuAnnot.Prelude.html#h:105"><span class="id" title="variable">h</span></a> <a class="idref" href="GMuAnnot.Prelude.html#x:106"><span class="id" title="variable">x</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.13.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="axiom">EnvOps.map</span> <a class="idref" href="GMuAnnot.Prelude.html#g:104"><span class="id" title="variable">g</span></a> (<span class="id" title="axiom">EnvOps.map</span> <a class="idref" href="GMuAnnot.Prelude.html#f:103"><span class="id" title="variable">f</span></a> <a class="idref" href="GMuAnnot.Prelude.html#E:102"><span class="id" title="variable">E</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.13.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <span class="id" title="axiom">EnvOps.map</span> <a class="idref" href="GMuAnnot.Prelude.html#h:105"><span class="id" title="variable">h</span></a> <a class="idref" href="GMuAnnot.Prelude.html#E:102"><span class="id" title="variable">E</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">E</span> <span class="id" title="keyword">using</span> <span class="id" title="lemma">env_ind</span>; <span class="id" title="var">introv</span> <span class="id" title="var">Hcomp</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">autorewrite</span> <span class="id" title="keyword">with</span> <span class="id" title="var">rew_env_map</span>; <span class="id" title="tactic">trivial</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="var">lets</span> <span class="id" title="var">IH</span>: <span class="id" title="var">IHE</span> <span class="id" title="var">f</span> <span class="id" title="var">g</span> <span class="id" title="var">h</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">IH</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">Hcomp</span>. <span class="id" title="tactic">trivial</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Ltac</span> <span class="id" title="var">clean_empty_Δ</span> :=<br/>
&nbsp;&nbsp;<span class="id" title="tactic">repeat</span> <span class="id" title="keyword">match</span> <span class="id" title="keyword">goal</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| [ <span class="id" title="var">H</span>: <span class="id" title="keyword">context</span> [ <a class="idref" href="../lambda2Gmu/GMu.Definitions.html#c683a0ef5cfb77e0c243d45a72fd3fea"><span class="id" title="definition">emptyΔ</span></a> <a class="idref" href="../lambda2Gmu/GMu.Definitions.html#3ca84bd817dd2b1e2f0f693cd9400702"><span class="id" title="notation">|,|</span></a> ?<span class="id" title="var">D</span> ] |- <span class="id" title="var">_</span> ] ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.0/stdlib//Coq.Lists.List.html#app_nil_r"><span class="id" title="lemma">List.app_nil_r</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| [ <span class="id" title="var">H</span>: <span class="id" title="keyword">context</span> [ ?<span class="id" title="var">D</span> <a class="idref" href="../lambda2Gmu/GMu.Definitions.html#3ca84bd817dd2b1e2f0f693cd9400702"><span class="id" title="notation">|,|</span></a> <a class="idref" href="../lambda2Gmu/GMu.Definitions.html#c683a0ef5cfb77e0c243d45a72fd3fea"><span class="id" title="definition">emptyΔ</span></a> ] |- <span class="id" title="var">_</span> ] ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.0/stdlib//Coq.Lists.List.html#app_nil_l"><span class="id" title="lemma">List.app_nil_l</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| [ <span class="id" title="var">H</span>: <span class="id" title="keyword">context</span> [ <a class="idref" href="../lambda2Gmu/GMu.Definitions.html#d2bf88c7986052c9dc5d682cca2fc0ac"><span class="id" title="notation">[]*</span></a> <a class="idref" href="../lambda2Gmu/GMu.Definitions.html#3ca84bd817dd2b1e2f0f693cd9400702"><span class="id" title="notation">|,|</span></a> ?<span class="id" title="var">D</span> ] |- <span class="id" title="var">_</span> ] ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.0/stdlib//Coq.Lists.List.html#app_nil_r"><span class="id" title="lemma">List.app_nil_r</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| [ <span class="id" title="var">H</span>: <span class="id" title="keyword">context</span> [ ?<span class="id" title="var">D</span> <a class="idref" href="../lambda2Gmu/GMu.Definitions.html#3ca84bd817dd2b1e2f0f693cd9400702"><span class="id" title="notation">|,|</span></a> <a class="idref" href="../lambda2Gmu/GMu.Definitions.html#d2bf88c7986052c9dc5d682cca2fc0ac"><span class="id" title="notation">[]*</span></a> ] |- <span class="id" title="var">_</span> ] ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.0/stdlib//Coq.Lists.List.html#app_nil_l"><span class="id" title="lemma">List.app_nil_l</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| [ |- <span class="id" title="keyword">context</span> [ <a class="idref" href="../lambda2Gmu/GMu.Definitions.html#c683a0ef5cfb77e0c243d45a72fd3fea"><span class="id" title="definition">emptyΔ</span></a> <a class="idref" href="../lambda2Gmu/GMu.Definitions.html#3ca84bd817dd2b1e2f0f693cd9400702"><span class="id" title="notation">|,|</span></a> ?<span class="id" title="var">D</span> ] ] ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.0/stdlib//Coq.Lists.List.html#app_nil_r"><span class="id" title="lemma">List.app_nil_r</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| [ |- <span class="id" title="keyword">context</span> [ ?<span class="id" title="var">D</span> <a class="idref" href="../lambda2Gmu/GMu.Definitions.html#3ca84bd817dd2b1e2f0f693cd9400702"><span class="id" title="notation">|,|</span></a> <a class="idref" href="../lambda2Gmu/GMu.Definitions.html#c683a0ef5cfb77e0c243d45a72fd3fea"><span class="id" title="definition">emptyΔ</span></a> ] ] ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.0/stdlib//Coq.Lists.List.html#app_nil_l"><span class="id" title="lemma">List.app_nil_l</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| [ |- <span class="id" title="keyword">context</span> [ <a class="idref" href="../lambda2Gmu/GMu.Definitions.html#d2bf88c7986052c9dc5d682cca2fc0ac"><span class="id" title="notation">[]*</span></a> <a class="idref" href="../lambda2Gmu/GMu.Definitions.html#3ca84bd817dd2b1e2f0f693cd9400702"><span class="id" title="notation">|,|</span></a> ?<span class="id" title="var">D</span> ] ] ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.0/stdlib//Coq.Lists.List.html#app_nil_r"><span class="id" title="lemma">List.app_nil_r</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| [ |- <span class="id" title="keyword">context</span> [ ?<span class="id" title="var">D</span> <a class="idref" href="../lambda2Gmu/GMu.Definitions.html#3ca84bd817dd2b1e2f0f693cd9400702"><span class="id" title="notation">|,|</span></a> <a class="idref" href="../lambda2Gmu/GMu.Definitions.html#d2bf88c7986052c9dc5d682cca2fc0ac"><span class="id" title="notation">[]*</span></a> ] ] ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.0/stdlib//Coq.Lists.List.html#app_nil_l"><span class="id" title="lemma">List.app_nil_l</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="binds_ext" class="idref" href="#binds_ext"><span class="id" title="lemma">binds_ext</span></a> : <span class="id" title="keyword">∀</span> <a id="A:107" class="idref" href="#A:107"><span class="id" title="binder">A</span></a> (<a id="x:108" class="idref" href="#x:108"><span class="id" title="binder">x</span></a> : <span class="id" title="axiom">var</span>) (<a id="v1:109" class="idref" href="#v1:109"><span class="id" title="binder">v1</span></a> <a id="v2:110" class="idref" href="#v2:110"><span class="id" title="binder">v2</span></a> : <a class="idref" href="GMuAnnot.Prelude.html#A:107"><span class="id" title="variable">A</span></a>) <a id="E:111" class="idref" href="#E:111"><span class="id" title="binder">E</span></a>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="definition">binds</span> <a class="idref" href="GMuAnnot.Prelude.html#x:108"><span class="id" title="variable">x</span></a> <a class="idref" href="GMuAnnot.Prelude.html#v1:109"><span class="id" title="variable">v1</span></a> <a class="idref" href="GMuAnnot.Prelude.html#E:111"><span class="id" title="variable">E</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="definition">binds</span> <a class="idref" href="GMuAnnot.Prelude.html#x:108"><span class="id" title="variable">x</span></a> <a class="idref" href="GMuAnnot.Prelude.html#v2:110"><span class="id" title="variable">v2</span></a> <a class="idref" href="GMuAnnot.Prelude.html#E:111"><span class="id" title="variable">E</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="GMuAnnot.Prelude.html#v1:109"><span class="id" title="variable">v1</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="GMuAnnot.Prelude.html#v2:110"><span class="id" title="variable">v2</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">E</span> <span class="id" title="keyword">using</span> <span class="id" title="lemma">env_ind</span>; <span class="id" title="var">introv</span> <span class="id" title="var">b1</span> <span class="id" title="var">b2</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="var">exfalso</span>. <span class="id" title="tactic">apply</span>× <span class="id" title="lemma">binds_empty_inv</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="var">lets</span>× [[? ?] | [? ?]]: <span class="id" title="lemma">binds_push_inv</span> <span class="id" title="var">b1</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">lets</span>× [[? ?] | [? ?]]: <span class="id" title="lemma">binds_push_inv</span> <span class="id" title="var">b2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">subst</span>; <span class="id" title="tactic">trivial</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="list_fold_map" class="idref" href="#list_fold_map"><span class="id" title="lemma">list_fold_map</span></a> : <span class="id" title="keyword">∀</span> (<a id="A:112" class="idref" href="#A:112"><span class="id" title="binder">A</span></a> <a id="B:113" class="idref" href="#B:113"><span class="id" title="binder">B</span></a> : <span class="id" title="keyword">Type</span>) (<a id="ls:114" class="idref" href="#ls:114"><span class="id" title="binder">ls</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.13.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="GMuAnnot.Prelude.html#A:112"><span class="id" title="variable">A</span></a>) (<a id="f:115" class="idref" href="#f:115"><span class="id" title="binder">f</span></a> : <a class="idref" href="GMuAnnot.Prelude.html#B:113"><span class="id" title="variable">B</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="GMuAnnot.Prelude.html#A:112"><span class="id" title="variable">A</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="GMuAnnot.Prelude.html#B:113"><span class="id" title="variable">B</span></a>) (<a id="g:116" class="idref" href="#g:116"><span class="id" title="binder">g</span></a> : <a class="idref" href="GMuAnnot.Prelude.html#A:112"><span class="id" title="variable">A</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="GMuAnnot.Prelude.html#A:112"><span class="id" title="variable">A</span></a>) (<a id="z:117" class="idref" href="#z:117"><span class="id" title="binder">z</span></a> : <a class="idref" href="GMuAnnot.Prelude.html#B:113"><span class="id" title="variable">B</span></a>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.13.0/stdlib//Coq.Lists.List.html#fold_left"><span class="id" title="definition">List.fold_left</span></a> (<span class="id" title="keyword">fun</span> <a id="a:118" class="idref" href="#a:118"><span class="id" title="binder">a</span></a> <a id="b:119" class="idref" href="#b:119"><span class="id" title="binder">b</span></a> ⇒ <a class="idref" href="GMuAnnot.Prelude.html#f:115"><span class="id" title="variable">f</span></a> <a class="idref" href="GMuAnnot.Prelude.html#a:118"><span class="id" title="variable">a</span></a> <a class="idref" href="GMuAnnot.Prelude.html#b:119"><span class="id" title="variable">b</span></a>) (<a class="idref" href="http://coq.inria.fr/distrib/V8.13.0/stdlib//Coq.Lists.List.html#map"><span class="id" title="definition">List.map</span></a> <a class="idref" href="GMuAnnot.Prelude.html#g:116"><span class="id" title="variable">g</span></a> <a class="idref" href="GMuAnnot.Prelude.html#ls:114"><span class="id" title="variable">ls</span></a>) <a class="idref" href="GMuAnnot.Prelude.html#z:117"><span class="id" title="variable">z</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.13.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.13.0/stdlib//Coq.Lists.List.html#fold_left"><span class="id" title="definition">List.fold_left</span></a> (<span class="id" title="keyword">fun</span> <a id="a:120" class="idref" href="#a:120"><span class="id" title="binder">a</span></a> <a id="b:121" class="idref" href="#b:121"><span class="id" title="binder">b</span></a> ⇒ <a class="idref" href="GMuAnnot.Prelude.html#f:115"><span class="id" title="variable">f</span></a> <a class="idref" href="GMuAnnot.Prelude.html#a:120"><span class="id" title="variable">a</span></a> (<a class="idref" href="GMuAnnot.Prelude.html#g:116"><span class="id" title="variable">g</span></a> <a class="idref" href="GMuAnnot.Prelude.html#b:121"><span class="id" title="variable">b</span></a>)) <a class="idref" href="GMuAnnot.Prelude.html#ls:114"><span class="id" title="variable">ls</span></a> <a class="idref" href="GMuAnnot.Prelude.html#z:117"><span class="id" title="variable">z</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">ls</span>; <span class="id" title="var">introv</span>; <span class="id" title="var">cbn</span>; <span class="id" title="tactic">eauto</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="notin_inverse" class="idref" href="#notin_inverse"><span class="id" title="lemma">notin_inverse</span></a> : <span class="id" title="keyword">∀</span> <a id="A:122" class="idref" href="#A:122"><span class="id" title="binder">A</span></a> (<a id="x:123" class="idref" href="#x:123"><span class="id" title="binder">x</span></a> <a id="y:124" class="idref" href="#y:124"><span class="id" title="binder">y</span></a> : <a class="idref" href="GMuAnnot.Prelude.html#A:122"><span class="id" title="variable">A</span></a>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="GMuAnnot.Prelude.html#x:123"><span class="id" title="variable">x</span></a> <span class="id" title="notation">\</span><span class="id" title="notation">notin</span> <span class="id" title="notation">\{</span> <a class="idref" href="GMuAnnot.Prelude.html#y:124"><span class="id" title="variable">y</span></a> <span class="id" title="notation">}</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="GMuAnnot.Prelude.html#y:124"><span class="id" title="variable">y</span></a> <span class="id" title="notation">\</span><span class="id" title="notation">notin</span> <span class="id" title="notation">\{</span> <a class="idref" href="GMuAnnot.Prelude.html#x:123"><span class="id" title="variable">x</span></a> <span class="id" title="notation">}</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">x</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'&lt;&gt;'_x"><span class="id" title="notation">≠</span></a> <span class="id" title="var">y</span>).<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">intro</span>. <span class="id" title="tactic">subst</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">apply</span> <span class="id" title="lemma">in_singleton_self</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">apply</span>× <span class="id" title="lemma">notin_singleton</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="LibList_map" class="idref" href="#LibList_map"><span class="id" title="lemma">LibList_map</span></a> : <span class="id" title="keyword">∀</span> <a id="T:125" class="idref" href="#T:125"><span class="id" title="binder">T</span></a> <a id="U:126" class="idref" href="#U:126"><span class="id" title="binder">U</span></a> (<a id="l:127" class="idref" href="#l:127"><span class="id" title="binder">l</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.13.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="GMuAnnot.Prelude.html#T:125"><span class="id" title="variable">T</span></a>) (<a id="f:128" class="idref" href="#f:128"><span class="id" title="binder">f</span></a> : <a class="idref" href="GMuAnnot.Prelude.html#T:125"><span class="id" title="variable">T</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="GMuAnnot.Prelude.html#U:126"><span class="id" title="variable">U</span></a>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.13.0/stdlib//Coq.Lists.List.html#map"><span class="id" title="definition">List.map</span></a> <a class="idref" href="GMuAnnot.Prelude.html#f:128"><span class="id" title="variable">f</span></a> <a class="idref" href="GMuAnnot.Prelude.html#l:127"><span class="id" title="variable">l</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <span class="id" title="definition">LibList.map</span> <a class="idref" href="GMuAnnot.Prelude.html#f:128"><span class="id" title="variable">f</span></a> <a class="idref" href="GMuAnnot.Prelude.html#l:127"><span class="id" title="variable">l</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">l</span>; <span class="id" title="tactic">intros</span>; <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> *; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">IHl</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="lemma">LibList.map_cons</span>. <span class="id" title="tactic">auto</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="LibList_mem" class="idref" href="#LibList_mem"><span class="id" title="lemma">LibList_mem</span></a> : <span class="id" title="keyword">∀</span> <a id="A:129" class="idref" href="#A:129"><span class="id" title="binder">A</span></a> (<a id="x:130" class="idref" href="#x:130"><span class="id" title="binder">x</span></a> : <a class="idref" href="GMuAnnot.Prelude.html#A:129"><span class="id" title="variable">A</span></a>) <a id="L:131" class="idref" href="#L:131"><span class="id" title="binder">L</span></a>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="inductive">LibList.mem</span> <a class="idref" href="GMuAnnot.Prelude.html#x:130"><span class="id" title="variable">x</span></a> <a class="idref" href="GMuAnnot.Prelude.html#L:131"><span class="id" title="variable">L</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.0/stdlib//Coq.Lists.List.html#In"><span class="id" title="definition">List.In</span></a> <a class="idref" href="GMuAnnot.Prelude.html#x:130"><span class="id" title="variable">x</span></a> <a class="idref" href="GMuAnnot.Prelude.html#L:131"><span class="id" title="variable">L</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">L</span>; <span class="id" title="var">introv</span> <span class="id" title="var">Hin</span>; <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> *; <span class="id" title="tactic">inversion</span> <span class="id" title="var">Hin</span>; <span class="id" title="tactic">eauto</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="subst_tb_many_split" class="idref" href="#subst_tb_many_split"><span class="id" title="lemma">subst_tb_many_split</span></a> : <span class="id" title="keyword">∀</span> <a id="Ah:132" class="idref" href="#Ah:132"><span class="id" title="binder">Ah</span></a> <a id="Ats:133" class="idref" href="#Ats:133"><span class="id" title="binder">Ats</span></a> <a id="Ph:134" class="idref" href="#Ph:134"><span class="id" title="binder">Ph</span></a> <a id="Pts:135" class="idref" href="#Pts:135"><span class="id" title="binder">Pts</span></a> <a id="F:136" class="idref" href="#F:136"><span class="id" title="binder">F</span></a>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="axiom">EnvOps.map</span> (<a class="idref" href="../lambda2Gmu/GMu.Definitions.html#subst_tb_many"><span class="id" title="definition">subst_tb_many</span></a> (<a class="idref" href="GMuAnnot.Prelude.html#Ah:132"><span class="id" title="variable">Ah</span></a> <span class="id" title="notation">::</span> <a class="idref" href="GMuAnnot.Prelude.html#Ats:133"><span class="id" title="variable">Ats</span></a>) (<a class="idref" href="GMuAnnot.Prelude.html#Ph:134"><span class="id" title="variable">Ph</span></a> <span class="id" title="notation">::</span> <a class="idref" href="GMuAnnot.Prelude.html#Pts:135"><span class="id" title="variable">Pts</span></a>)) <a class="idref" href="GMuAnnot.Prelude.html#F:136"><span class="id" title="variable">F</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.13.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="axiom">EnvOps.map</span> (<a class="idref" href="../lambda2Gmu/GMu.Definitions.html#subst_tb_many"><span class="id" title="definition">subst_tb_many</span></a> <a class="idref" href="GMuAnnot.Prelude.html#Ats:133"><span class="id" title="variable">Ats</span></a> <a class="idref" href="GMuAnnot.Prelude.html#Pts:135"><span class="id" title="variable">Pts</span></a>) (<span class="id" title="axiom">EnvOps.map</span> (<a class="idref" href="../lambda2Gmu/GMu.Definitions.html#subst_tb"><span class="id" title="definition">subst_tb</span></a> <a class="idref" href="GMuAnnot.Prelude.html#Ah:132"><span class="id" title="variable">Ah</span></a> <a class="idref" href="GMuAnnot.Prelude.html#Ph:134"><span class="id" title="variable">Ph</span></a>) <a class="idref" href="GMuAnnot.Prelude.html#F:136"><span class="id" title="variable">F</span></a>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="axiom">map_def</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="GMuAnnot.Prelude.html#map_map"><span class="id" title="lemma">map_map</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">repeat</span> <span class="id" title="tactic">rewrite</span> &lt;- <a class="idref" href="GMuAnnot.Prelude.html#LibList_map"><span class="id" title="lemma">LibList_map</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="var">cbn</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.0/stdlib//Coq.Lists.List.html#map_ext_in"><span class="id" title="lemma">List.map_ext_in</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">a</span> <span class="id" title="keyword">as</span> [? [?]].<br/>
&nbsp;&nbsp;<span class="id" title="var">cbn</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">f_equal</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Ltac</span> <span class="id" title="var">fresh_intros</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">envvars</span> := <span class="id" title="var">gather_vars</span> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">repeat</span> <span class="id" title="keyword">match</span> <span class="id" title="keyword">goal</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;TODO&nbsp;find&nbsp;only&nbsp;uninstantiated&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| [ <span class="id" title="var">H</span>: ?<span class="id" title="var">x</span> <span class="id" title="notation">\</span><span class="id" title="notation">notin</span> ?<span class="id" title="var">L</span> |- <span class="id" title="var">_</span> ] ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">instantiate</span> (1:=<span class="id" title="var">envvars</span>) <span class="id" title="tactic">in</span> <span class="id" title="var">H</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="union_distributes" class="idref" href="#union_distributes"><span class="id" title="lemma">union_distributes</span></a> : <span class="id" title="keyword">∀</span> <a id="T:137" class="idref" href="#T:137"><span class="id" title="binder">T</span></a> (<a id="A:138" class="idref" href="#A:138"><span class="id" title="binder">A</span></a> <a id="B:139" class="idref" href="#B:139"><span class="id" title="binder">B</span></a> <a id="C:140" class="idref" href="#C:140"><span class="id" title="binder">C</span></a> : <span class="id" title="axiom">fset</span> <a class="idref" href="GMuAnnot.Prelude.html#T:137"><span class="id" title="variable">T</span></a>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">(</span><a class="idref" href="GMuAnnot.Prelude.html#A:138"><span class="id" title="variable">A</span></a> <span class="id" title="notation">\</span><span class="id" title="notation">u</span> <a class="idref" href="GMuAnnot.Prelude.html#B:139"><span class="id" title="variable">B</span></a><span class="id" title="notation">)</span> <span class="id" title="notation">\</span><span class="id" title="notation">n</span> <a class="idref" href="GMuAnnot.Prelude.html#C:140"><span class="id" title="variable">C</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <span class="id" title="notation">(</span><a class="idref" href="GMuAnnot.Prelude.html#A:138"><span class="id" title="variable">A</span></a> <span class="id" title="notation">\</span><span class="id" title="notation">n</span> <a class="idref" href="GMuAnnot.Prelude.html#C:140"><span class="id" title="variable">C</span></a><span class="id" title="notation">)</span> <span class="id" title="notation">\</span><span class="id" title="notation">u</span> <span class="id" title="notation">(</span><a class="idref" href="GMuAnnot.Prelude.html#B:139"><span class="id" title="variable">B</span></a> <span class="id" title="notation">\</span><span class="id" title="notation">n</span> <a class="idref" href="GMuAnnot.Prelude.html#C:140"><span class="id" title="variable">C</span></a><span class="id" title="notation">)</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="axiom">fset_extens</span>; <span class="id" title="tactic">intros</span> <span class="id" title="var">x</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">rewrite</span> <span class="id" title="axiom">in_union</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="axiom">in_inter</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">H</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">HAB</span> <span class="id" title="var">HC</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="axiom">in_union</span> <span class="id" title="tactic">in</span> <span class="id" title="var">HAB</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">HAB</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">left</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span>¬ <span class="id" title="axiom">in_inter</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">right</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span>¬ <span class="id" title="axiom">in_inter</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">rewrite</span> <span class="id" title="axiom">in_union</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">H</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">H</span> | <span class="id" title="var">H</span>]; <span class="id" title="tactic">rewrite</span> <span class="id" title="axiom">in_inter</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>; <span class="id" title="tactic">destruct</span> <span class="id" title="var">H</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="axiom">in_inter</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">split</span>~; <span class="id" title="tactic">rewrite</span>¬ <span class="id" title="axiom">in_union</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="union_empty" class="idref" href="#union_empty"><span class="id" title="lemma">union_empty</span></a> : <span class="id" title="keyword">∀</span> <a id="T:141" class="idref" href="#T:141"><span class="id" title="binder">T</span></a> (<a id="A:142" class="idref" href="#A:142"><span class="id" title="binder">A</span></a> <a id="B:143" class="idref" href="#B:143"><span class="id" title="binder">B</span></a> : <span class="id" title="axiom">fset</span> <a class="idref" href="GMuAnnot.Prelude.html#T:141"><span class="id" title="variable">T</span></a>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="GMuAnnot.Prelude.html#A:142"><span class="id" title="variable">A</span></a> <span class="id" title="notation">\</span><span class="id" title="notation">u</span> <a class="idref" href="GMuAnnot.Prelude.html#B:143"><span class="id" title="variable">B</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <span class="id" title="notation">\{}</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="GMuAnnot.Prelude.html#A:142"><span class="id" title="variable">A</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <span class="id" title="notation">\{}</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.0/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">∧</span></a> <a class="idref" href="GMuAnnot.Prelude.html#B:143"><span class="id" title="variable">B</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <span class="id" title="notation">\{}</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">split</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="axiom">fset_extens</span>; <span class="id" title="tactic">intros</span> <span class="id" title="var">x</span> <span class="id" title="var">Hin</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">solve</span> [<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">xAB</span>: <span class="id" title="var">x</span> <span class="id" title="notation">\</span><span class="id" title="notation">in</span> <span class="id" title="var">A</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.0/stdlib//Coq.Init.Logic.html#f031fe1957c4a4a8e217aa46af2b4e25"><span class="id" title="notation">∨</span></a> <span class="id" title="var">x</span> <span class="id" title="notation">\</span><span class="id" title="notation">in</span> <span class="id" title="var">B</span>); <span class="id" title="tactic">auto</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="axiom">in_union</span> <span class="id" title="tactic">in</span> <span class="id" title="var">xAB</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">H</span> <span class="id" title="tactic">in</span> <span class="id" title="var">xAB</span>; <span class="id" title="tactic">auto</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">false</span>× <span class="id" title="lemma">in_empty_inv</span>].<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="empty_inter_implies_notin" class="idref" href="#empty_inter_implies_notin"><span class="id" title="lemma">empty_inter_implies_notin</span></a> : <span class="id" title="keyword">∀</span> <a id="T:144" class="idref" href="#T:144"><span class="id" title="binder">T</span></a> (<a id="x:145" class="idref" href="#x:145"><span class="id" title="binder">x</span></a> : <a class="idref" href="GMuAnnot.Prelude.html#T:144"><span class="id" title="variable">T</span></a>) <a id="A:146" class="idref" href="#A:146"><span class="id" title="binder">A</span></a> <a id="B:147" class="idref" href="#B:147"><span class="id" title="binder">B</span></a>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="GMuAnnot.Prelude.html#A:146"><span class="id" title="variable">A</span></a> <span class="id" title="notation">\</span><span class="id" title="notation">n</span> <a class="idref" href="GMuAnnot.Prelude.html#B:147"><span class="id" title="variable">B</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <span class="id" title="notation">\{}</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="GMuAnnot.Prelude.html#x:145"><span class="id" title="variable">x</span></a> <span class="id" title="notation">\</span><span class="id" title="notation">in</span> <a class="idref" href="GMuAnnot.Prelude.html#A:146"><span class="id" title="variable">A</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="GMuAnnot.Prelude.html#x:145"><span class="id" title="variable">x</span></a> <span class="id" title="notation">\</span><span class="id" title="notation">notin</span> <a class="idref" href="GMuAnnot.Prelude.html#B:147"><span class="id" title="variable">B</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intro</span> <span class="id" title="var">HF</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">asserts</span>¬ <span class="id" title="var">AB</span>: (<span class="id" title="var">x</span> <span class="id" title="notation">\</span><span class="id" title="notation">in</span> <span class="id" title="var">A</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.0/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">∧</span></a> <span class="id" title="var">x</span> <span class="id" title="notation">\</span><span class="id" title="notation">in</span> <span class="id" title="var">B</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="axiom">in_inter</span> <span class="id" title="tactic">in</span> <span class="id" title="var">AB</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">H</span> <span class="id" title="tactic">in</span> <span class="id" title="var">AB</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span>× <span class="id" title="lemma">in_empty_inv</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Ltac</span> <span class="id" title="var">fold_subst_src</span> :=<br/>
&nbsp;&nbsp;<span class="id" title="tactic">repeat</span> <span class="id" title="keyword">match</span> <span class="id" title="keyword">goal</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| [ <span class="id" title="var">H</span>: <span class="id" title="keyword">context</span>[<span class="id" title="definition">LibList.fold_right</span> (<span class="id" title="keyword">fun</span> (<a id="x:150" class="idref" href="#x:150"><span class="id" title="binder">x</span></a> : <span class="id" title="axiom">var</span>) (<a id="acc:151" class="idref" href="#acc:151"><span class="id" title="binder">acc</span></a> : <span class="id" title="axiom">fset</span> <span class="id" title="axiom">var</span>) ⇒ <span class="id" title="notation">\{</span> <a class="idref" href="GMuAnnot.Prelude.html#x:148"><span class="id" title="variable">x</span></a><span class="id" title="notation">}</span> <span class="id" title="notation">\</span><span class="id" title="notation">u</span> <a class="idref" href="GMuAnnot.Prelude.html#acc:149"><span class="id" title="variable">acc</span></a>) <span class="id" title="notation">\{}</span> (<a class="idref" href="http://coq.inria.fr/distrib/V8.13.0/stdlib//Coq.Lists.List.html#map"><span class="id" title="definition">List.map</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.0/stdlib//Coq.Init.Datatypes.html#fst"><span class="id" title="definition">fst</span></a> ?<span class="id" title="var">Th</span>)] |- <span class="id" title="var">_</span> ] ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">fold</span> (<span class="id" title="definition">from_list</span> (<a class="idref" href="http://coq.inria.fr/distrib/V8.13.0/stdlib//Coq.Lists.List.html#map"><span class="id" title="definition">List.map</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.0/stdlib//Coq.Init.Datatypes.html#fst"><span class="id" title="definition">fst</span></a> <span class="id" title="var">Th</span>)) <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">fold</span> (<a class="idref" href="../lambda2Gmu/GMu.Definitions.html#substitution_sources"><span class="id" title="definition">substitution_sources</span></a> <span class="id" title="var">Th</span>) <span class="id" title="tactic">in</span> <span class="id" title="var">H</span><br/>
&nbsp;&nbsp;| [ |- <span class="id" title="keyword">context</span>[<span class="id" title="definition">LibList.fold_right</span> (<span class="id" title="keyword">fun</span> (<a id="x:154" class="idref" href="#x:154"><span class="id" title="binder">x</span></a> : <span class="id" title="axiom">var</span>) (<a id="acc:155" class="idref" href="#acc:155"><span class="id" title="binder">acc</span></a> : <span class="id" title="axiom">fset</span> <span class="id" title="axiom">var</span>) ⇒ <span class="id" title="notation">\{</span> <a class="idref" href="GMuAnnot.Prelude.html#x:152"><span class="id" title="variable">x</span></a><span class="id" title="notation">}</span> <span class="id" title="notation">\</span><span class="id" title="notation">u</span> <a class="idref" href="GMuAnnot.Prelude.html#acc:153"><span class="id" title="variable">acc</span></a>) <span class="id" title="notation">\{}</span> (<a class="idref" href="http://coq.inria.fr/distrib/V8.13.0/stdlib//Coq.Lists.List.html#map"><span class="id" title="definition">List.map</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.0/stdlib//Coq.Init.Datatypes.html#fst"><span class="id" title="definition">fst</span></a> ?<span class="id" title="var">Th</span>)] ] ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">fold</span> (<span class="id" title="definition">from_list</span> (<a class="idref" href="http://coq.inria.fr/distrib/V8.13.0/stdlib//Coq.Lists.List.html#map"><span class="id" title="definition">List.map</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.0/stdlib//Coq.Init.Datatypes.html#fst"><span class="id" title="definition">fst</span></a> <span class="id" title="var">Th</span>));<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">fold</span> (<a class="idref" href="../lambda2Gmu/GMu.Definitions.html#substitution_sources"><span class="id" title="definition">substitution_sources</span></a> <span class="id" title="var">Th</span>)<br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="subset_transitive" class="idref" href="#subset_transitive"><span class="id" title="lemma">subset_transitive</span></a> : <span class="id" title="keyword">∀</span> <a id="T:156" class="idref" href="#T:156"><span class="id" title="binder">T</span></a> (<a id="A:157" class="idref" href="#A:157"><span class="id" title="binder">A</span></a> <a id="B:158" class="idref" href="#B:158"><span class="id" title="binder">B</span></a> <a id="C:159" class="idref" href="#C:159"><span class="id" title="binder">C</span></a> : <span class="id" title="axiom">fset</span> <a class="idref" href="GMuAnnot.Prelude.html#T:156"><span class="id" title="variable">T</span></a>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="GMuAnnot.Prelude.html#A:157"><span class="id" title="variable">A</span></a> <span class="id" title="notation">\</span><span class="id" title="notation">c</span> <a class="idref" href="GMuAnnot.Prelude.html#B:158"><span class="id" title="variable">B</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="GMuAnnot.Prelude.html#B:158"><span class="id" title="variable">B</span></a> <span class="id" title="notation">\</span><span class="id" title="notation">c</span> <a class="idref" href="GMuAnnot.Prelude.html#C:159"><span class="id" title="variable">C</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="GMuAnnot.Prelude.html#A:157"><span class="id" title="variable">A</span></a> <span class="id" title="notation">\</span><span class="id" title="notation">c</span> <a class="idref" href="GMuAnnot.Prelude.html#C:159"><span class="id" title="variable">C</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="var">introv</span> <span class="id" title="var">AB</span> <span class="id" title="var">BC</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">x</span> <span class="id" title="var">In</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">auto</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="lists_map_eq" class="idref" href="#lists_map_eq"><span class="id" title="lemma">lists_map_eq</span></a> : <span class="id" title="keyword">∀</span> <a id="A:160" class="idref" href="#A:160"><span class="id" title="binder">A</span></a> <a id="B:161" class="idref" href="#B:161"><span class="id" title="binder">B</span></a> (<a id="f:162" class="idref" href="#f:162"><span class="id" title="binder">f</span></a> : <a class="idref" href="GMuAnnot.Prelude.html#A:160"><span class="id" title="variable">A</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="GMuAnnot.Prelude.html#B:161"><span class="id" title="variable">B</span></a>) <a id="la:163" class="idref" href="#la:163"><span class="id" title="binder">la</span></a> <a id="lb:164" class="idref" href="#lb:164"><span class="id" title="binder">lb</span></a> <a id="a:165" class="idref" href="#a:165"><span class="id" title="binder">a</span></a> <a id="b:166" class="idref" href="#b:166"><span class="id" title="binder">b</span></a>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.13.0/stdlib//Coq.Lists.List.html#map"><span class="id" title="definition">List.map</span></a> <a class="idref" href="GMuAnnot.Prelude.html#f:162"><span class="id" title="variable">f</span></a> <a class="idref" href="GMuAnnot.Prelude.html#la:163"><span class="id" title="variable">la</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.0/stdlib//Coq.Lists.List.html#map"><span class="id" title="definition">List.map</span></a> <a class="idref" href="GMuAnnot.Prelude.html#f:162"><span class="id" title="variable">f</span></a> <a class="idref" href="GMuAnnot.Prelude.html#lb:164"><span class="id" title="variable">lb</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.13.0/stdlib//Coq.Lists.List.html#In"><span class="id" title="definition">List.In</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="GMuAnnot.Prelude.html#a:165"><span class="id" title="variable">a</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.13.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="GMuAnnot.Prelude.html#b:166"><span class="id" title="variable">b</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.13.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> (<a class="idref" href="../lambda2Gmu/GMu.Zip.html#zip"><span class="id" title="definition">zip</span></a> <a class="idref" href="GMuAnnot.Prelude.html#la:163"><span class="id" title="variable">la</span></a> <a class="idref" href="GMuAnnot.Prelude.html#lb:164"><span class="id" title="variable">lb</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.13.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="GMuAnnot.Prelude.html#f:162"><span class="id" title="variable">f</span></a> <a class="idref" href="GMuAnnot.Prelude.html#a:165"><span class="id" title="variable">a</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="GMuAnnot.Prelude.html#f:162"><span class="id" title="variable">f</span></a> <a class="idref" href="GMuAnnot.Prelude.html#b:166"><span class="id" title="variable">b</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">la</span> <span class="id" title="keyword">as</span> [| <span class="id" title="var">a'</span> <span class="id" title="var">la</span>]; <span class="id" title="tactic">destruct</span> <span class="id" title="var">lb</span> <span class="id" title="keyword">as</span> [| <span class="id" title="var">b'</span> <span class="id" title="var">lb</span>]; <span class="id" title="var">introv</span> <span class="id" title="var">Map</span> <span class="id" title="var">In</span>; <span class="id" title="tactic">try</span> <span class="id" title="tactic">solve</span> [<span class="id" title="tactic">inversion</span> <span class="id" title="var">Map</span> | <span class="id" title="tactic">inversion</span> <span class="id" title="var">In</span>].<br/>
&nbsp;&nbsp;<span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> ×.<br/>
&nbsp;&nbsp;<span class="id" title="var">inversions</span> <span class="id" title="var">Map</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">In</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">In</span> | <span class="id" title="var">In</span>].<br/>
&nbsp;&nbsp;- <span class="id" title="var">inversions</span>¬ <span class="id" title="var">In</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">apply</span> <span class="id" title="var">IHla</span> <span class="id" title="keyword">with</span> <span class="id" title="var">lb</span>; <span class="id" title="tactic">auto</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="equations_from_lists_are_equations" class="idref" href="#equations_from_lists_are_equations"><span class="id" title="lemma">equations_from_lists_are_equations</span></a> : <span class="id" title="keyword">∀</span> <a id="D:167" class="idref" href="#D:167"><span class="id" title="binder">D</span></a> <a id="Ts:168" class="idref" href="#Ts:168"><span class="id" title="binder">Ts</span></a> <a id="Us:169" class="idref" href="#Us:169"><span class="id" title="binder">Us</span></a>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="GMuAnnot.Prelude.html#D:167"><span class="id" title="variable">D</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="../lambda2Gmu/GMu.Definitions.html#equations_from_lists"><span class="id" title="definition">equations_from_lists</span></a> <a class="idref" href="GMuAnnot.Prelude.html#Ts:168"><span class="id" title="variable">Ts</span></a> <a class="idref" href="GMuAnnot.Prelude.html#Us:169"><span class="id" title="variable">Us</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.13.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">(</span></a><span class="id" title="keyword">∀</span> <a id="eq:170" class="idref" href="#eq:170"><span class="id" title="binder">eq</span></a>, <a class="idref" href="http://coq.inria.fr/distrib/V8.13.0/stdlib//Coq.Lists.List.html#In"><span class="id" title="definition">List.In</span></a> <a class="idref" href="GMuAnnot.Prelude.html#eq:170"><span class="id" title="variable">eq</span></a> <a class="idref" href="GMuAnnot.Prelude.html#D:167"><span class="id" title="variable">D</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.0/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">∃</span></a> <a id="3963b7f386f6662b0cfece9d01ee026a" class="idref" href="#3963b7f386f6662b0cfece9d01ee026a"><span class="id" title="binder">ϵ</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.13.0/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">,</span></a> <a class="idref" href="GMuAnnot.Prelude.html#eq:170"><span class="id" title="variable">eq</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="../lambda2Gmu/GMu.Definitions.html#tc_eq"><span class="id" title="constructor">tc_eq</span></a> <a class="idref" href="GMuAnnot.Prelude.html#3963b7f386f6662b0cfece9d01ee026a"><span class="id" title="variable">ϵ</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.13.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">)</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">D</span>; <span class="id" title="var">cbn</span>; <span class="id" title="var">introv</span> <span class="id" title="var">Deq</span> <span class="id" title="var">Hin</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;+ <span class="id" title="var">false</span>.<br/>
&nbsp;&nbsp;+ <span class="id" title="tactic">destruct</span> <span class="id" title="var">Ts</span>; <span class="id" title="tactic">destruct</span> <span class="id" title="var">Us</span>; <span class="id" title="var">cbn</span>; <span class="id" title="tactic">try</span> <span class="id" title="tactic">solve</span> [<span class="id" title="var">false</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Deq</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">inversions</span> <span class="id" title="var">Deq</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">Hin</span>; <span class="id" title="tactic">subst</span>; <span class="id" title="tactic">eauto</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Open</span> <span class="id" title="keyword">Scope</span> <span class="id" title="var">list_scope</span>.<br/>

<br/>
<span class="id" title="keyword">Ltac</span> <span class="id" title="var">fold_delta</span> :=<br/>
&nbsp;&nbsp;<span class="id" title="tactic">repeat</span> <span class="id" title="keyword">match</span> <span class="id" title="keyword">goal</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| [ <span class="id" title="var">H</span>: <span class="id" title="keyword">context</span> [<a class="idref" href="http://coq.inria.fr/distrib/V8.13.0/stdlib//Coq.Lists.List.html#map"><span class="id" title="definition">List.map</span></a> <a class="idref" href="../lambda2Gmu/GMu.Definitions.html#tc_var"><span class="id" title="constructor">tc_var</span></a> ?<span class="id" title="var">As</span>] |- <span class="id" title="var">_</span> ] ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">fold</span> (<a class="idref" href="../lambda2Gmu/GMu.Definitions.html#tc_vars"><span class="id" title="definition">tc_vars</span></a> <span class="id" title="var">As</span>) <span class="id" title="tactic">in</span> <span class="id" title="var">H</span><br/>
&nbsp;&nbsp;| [ <span class="id" title="var">H</span>: <span class="id" title="keyword">context</span> [ <a class="idref" href="http://coq.inria.fr/distrib/V8.13.0/stdlib//Coq.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">(</span></a><a class="idref" href="../lambda2Gmu/GMu.Definitions.html#tc_var"><span class="id" title="constructor">tc_var</span></a> ?<span class="id" title="var">X</span><a class="idref" href="http://coq.inria.fr/distrib/V8.13.0/stdlib//Coq.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.0/stdlib//Coq.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">::</span></a> ?<span class="id" title="var">As</span>] |- <span class="id" title="var">_</span> ] ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="var">As</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="../lambda2Gmu/GMu.Definitions.html#d2bf88c7986052c9dc5d682cca2fc0ac"><span class="id" title="notation">[]*</span></a> ⇒ <span class="id" title="tactic">fail</span> 1<br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">_</span> ⇒ <span class="id" title="tactic">fold</span> (<a class="idref" href="../lambda2Gmu/GMu.Definitions.html#b5ab1b23d5b56035820660ded1af9bea"><span class="id" title="notation">[</span></a><a class="idref" href="../lambda2Gmu/GMu.Definitions.html#tc_var"><span class="id" title="constructor">tc_var</span></a> <span class="id" title="var">X</span><a class="idref" href="../lambda2Gmu/GMu.Definitions.html#b5ab1b23d5b56035820660ded1af9bea"><span class="id" title="notation">]*</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.0/stdlib//Coq.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <span class="id" title="var">As</span>) <span class="id" title="tactic">in</span> <span class="id" title="var">H</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span><br/>
&nbsp;&nbsp;| [ <span class="id" title="var">H</span>: <span class="id" title="keyword">context</span> [ <a class="idref" href="http://coq.inria.fr/distrib/V8.13.0/stdlib//Coq.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">(</span></a><a class="idref" href="../lambda2Gmu/GMu.Definitions.html#tc_eq"><span class="id" title="constructor">tc_eq</span></a> ?<span class="id" title="var">eq</span><a class="idref" href="http://coq.inria.fr/distrib/V8.13.0/stdlib//Coq.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.0/stdlib//Coq.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">::</span></a> ?<span class="id" title="var">As</span>] |- <span class="id" title="var">_</span> ] ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="var">As</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="../lambda2Gmu/GMu.Definitions.html#d2bf88c7986052c9dc5d682cca2fc0ac"><span class="id" title="notation">[]*</span></a> ⇒ <span class="id" title="tactic">fail</span> 1<br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">_</span> ⇒ <span class="id" title="tactic">fold</span> (<a class="idref" href="../lambda2Gmu/GMu.Definitions.html#b5ab1b23d5b56035820660ded1af9bea"><span class="id" title="notation">[</span></a><a class="idref" href="../lambda2Gmu/GMu.Definitions.html#tc_eq"><span class="id" title="constructor">tc_eq</span></a> <span class="id" title="var">eq</span><a class="idref" href="../lambda2Gmu/GMu.Definitions.html#b5ab1b23d5b56035820660ded1af9bea"><span class="id" title="notation">]*</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.0/stdlib//Coq.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <span class="id" title="var">As</span>) <span class="id" title="tactic">in</span> <span class="id" title="var">H</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span><br/>
&nbsp;&nbsp;| [ |- <span class="id" title="keyword">context</span> [<a class="idref" href="http://coq.inria.fr/distrib/V8.13.0/stdlib//Coq.Lists.List.html#map"><span class="id" title="definition">List.map</span></a> <a class="idref" href="../lambda2Gmu/GMu.Definitions.html#tc_var"><span class="id" title="constructor">tc_var</span></a> ?<span class="id" title="var">As</span>] ] ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">fold</span> (<a class="idref" href="../lambda2Gmu/GMu.Definitions.html#tc_vars"><span class="id" title="definition">tc_vars</span></a> <span class="id" title="var">As</span>)<br/>
&nbsp;&nbsp;| [ |- <span class="id" title="keyword">context</span> [ <a class="idref" href="http://coq.inria.fr/distrib/V8.13.0/stdlib//Coq.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">(</span></a><a class="idref" href="../lambda2Gmu/GMu.Definitions.html#tc_var"><span class="id" title="constructor">tc_var</span></a> ?<span class="id" title="var">X</span><a class="idref" href="http://coq.inria.fr/distrib/V8.13.0/stdlib//Coq.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.0/stdlib//Coq.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">::</span></a> ?<span class="id" title="var">As</span>] ] ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="var">As</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="../lambda2Gmu/GMu.Definitions.html#d2bf88c7986052c9dc5d682cca2fc0ac"><span class="id" title="notation">[]*</span></a> ⇒ <span class="id" title="tactic">fail</span> 1<br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">_</span> ⇒ <span class="id" title="tactic">fold</span> (<a class="idref" href="../lambda2Gmu/GMu.Definitions.html#b5ab1b23d5b56035820660ded1af9bea"><span class="id" title="notation">[</span></a><a class="idref" href="../lambda2Gmu/GMu.Definitions.html#tc_var"><span class="id" title="constructor">tc_var</span></a> <span class="id" title="var">X</span><a class="idref" href="../lambda2Gmu/GMu.Definitions.html#b5ab1b23d5b56035820660ded1af9bea"><span class="id" title="notation">]*</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.0/stdlib//Coq.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <span class="id" title="var">As</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span><br/>
&nbsp;&nbsp;| [ |- <span class="id" title="keyword">context</span> [ <a class="idref" href="http://coq.inria.fr/distrib/V8.13.0/stdlib//Coq.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">(</span></a><a class="idref" href="../lambda2Gmu/GMu.Definitions.html#tc_eq"><span class="id" title="constructor">tc_eq</span></a> ?<span class="id" title="var">eq</span><a class="idref" href="http://coq.inria.fr/distrib/V8.13.0/stdlib//Coq.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.0/stdlib//Coq.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">::</span></a> ?<span class="id" title="var">As</span>] ] ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="var">As</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="../lambda2Gmu/GMu.Definitions.html#d2bf88c7986052c9dc5d682cca2fc0ac"><span class="id" title="notation">[]*</span></a> ⇒ <span class="id" title="tactic">fail</span> 1<br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">_</span> ⇒ <span class="id" title="tactic">fold</span> (<a class="idref" href="../lambda2Gmu/GMu.Definitions.html#b5ab1b23d5b56035820660ded1af9bea"><span class="id" title="notation">[</span></a><a class="idref" href="../lambda2Gmu/GMu.Definitions.html#tc_eq"><span class="id" title="constructor">tc_eq</span></a> <span class="id" title="var">eq</span><a class="idref" href="../lambda2Gmu/GMu.Definitions.html#b5ab1b23d5b56035820660ded1af9bea"><span class="id" title="notation">]*</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.0/stdlib//Coq.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <span class="id" title="var">As</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
<span class="id" title="keyword">Ltac</span> <span class="id" title="var">destruct_in_app</span> :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="keyword">goal</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| [ <span class="id" title="var">H</span>: <a class="idref" href="http://coq.inria.fr/distrib/V8.13.0/stdlib//Coq.Lists.List.html#In"><span class="id" title="definition">List.In</span></a> ?<span class="id" title="var">X</span> (?<span class="id" title="var">A</span> <span class="id" title="notation">++</span> ?<span class="id" title="var">B</span>) |- <span class="id" title="var">_</span> ] ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.0/stdlib//Coq.Lists.List.html#in_app_or"><span class="id" title="lemma">List.in_app_or</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">H</span><br/>
&nbsp;&nbsp;| [ <span class="id" title="var">H</span>: <a class="idref" href="../lambda2Gmu/GMu.Definitions.html#is_var_defined"><span class="id" title="definition">is_var_defined</span></a> (?<span class="id" title="var">A</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.0/stdlib//Coq.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> ?<span class="id" title="var">B</span>) ?<span class="id" title="var">X</span> |- <span class="id" title="var">_</span> ] ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="../lambda2Gmu/GMu.Definitions.html#is_var_defined"><span class="id" title="definition">is_var_defined</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.0/stdlib//Coq.Lists.List.html#in_app_or"><span class="id" title="lemma">List.in_app_or</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">H</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>
<span class="id" title="keyword">Close</span> <span class="id" title="keyword">Scope</span> <span class="id" title="var">list_scope</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="Forall2_eq_len" class="idref" href="#Forall2_eq_len"><span class="id" title="lemma">Forall2_eq_len</span></a> : <span class="id" title="keyword">∀</span> <a id="A:172" class="idref" href="#A:172"><span class="id" title="binder">A</span></a> <a id="P:173" class="idref" href="#P:173"><span class="id" title="binder">P</span></a> (<a id="l1:174" class="idref" href="#l1:174"><span class="id" title="binder">l1</span></a> <a id="l2:175" class="idref" href="#l2:175"><span class="id" title="binder">l2</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.13.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="GMuAnnot.Prelude.html#A:172"><span class="id" title="variable">A</span></a>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.13.0/stdlib//Coq.Lists.List.html#Forall2"><span class="id" title="inductive">List.Forall2</span></a> <a class="idref" href="GMuAnnot.Prelude.html#P:173"><span class="id" title="variable">P</span></a> <a class="idref" href="GMuAnnot.Prelude.html#l1:174"><span class="id" title="variable">l1</span></a> <a class="idref" href="GMuAnnot.Prelude.html#l2:175"><span class="id" title="variable">l2</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.13.0/stdlib//Coq.Lists.List.html#length"><span class="id" title="abbreviation">List.length</span></a> <a class="idref" href="GMuAnnot.Prelude.html#l1:174"><span class="id" title="variable">l1</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.0/stdlib//Coq.Lists.List.html#length"><span class="id" title="abbreviation">List.length</span></a> <a class="idref" href="GMuAnnot.Prelude.html#l2:175"><span class="id" title="variable">l2</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">l1</span>; <span class="id" title="tactic">destruct</span> <span class="id" title="var">l2</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">introv</span> <span class="id" title="var">H</span>; <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> *;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">inversions</span> <span class="id" title="var">H</span>; <span class="id" title="tactic">auto</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="nth_error_map" class="idref" href="#nth_error_map"><span class="id" title="lemma">nth_error_map</span></a> : <span class="id" title="keyword">∀</span> <a id="A:176" class="idref" href="#A:176"><span class="id" title="binder">A</span></a> <a id="B:177" class="idref" href="#B:177"><span class="id" title="binder">B</span></a> (<a id="F:178" class="idref" href="#F:178"><span class="id" title="binder">F</span></a> : <a class="idref" href="GMuAnnot.Prelude.html#A:176"><span class="id" title="variable">A</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="GMuAnnot.Prelude.html#B:177"><span class="id" title="variable">B</span></a>) <a id="l:179" class="idref" href="#l:179"><span class="id" title="binder">l</span></a> <a id="n:180" class="idref" href="#n:180"><span class="id" title="binder">n</span></a> <a id="d:181" class="idref" href="#d:181"><span class="id" title="binder">d</span></a>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.13.0/stdlib//Coq.Lists.List.html#nth_error"><span class="id" title="definition">List.nth_error</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.13.0/stdlib//Coq.Lists.List.html#map"><span class="id" title="definition">List.map</span></a> <a class="idref" href="GMuAnnot.Prelude.html#F:178"><span class="id" title="variable">F</span></a> <a class="idref" href="GMuAnnot.Prelude.html#l:179"><span class="id" title="variable">l</span></a>) <a class="idref" href="GMuAnnot.Prelude.html#n:180"><span class="id" title="variable">n</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="GMuAnnot.Prelude.html#d:181"><span class="id" title="variable">d</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.13.0/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">∃</span></a> <a id="e:182" class="idref" href="#e:182"><span class="id" title="binder">e</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.13.0/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">,</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.0/stdlib//Coq.Lists.List.html#nth_error"><span class="id" title="definition">List.nth_error</span></a> <a class="idref" href="GMuAnnot.Prelude.html#l:179"><span class="id" title="variable">l</span></a> <a class="idref" href="GMuAnnot.Prelude.html#n:180"><span class="id" title="variable">n</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="GMuAnnot.Prelude.html#e:182"><span class="id" title="variable">e</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.0/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">∧</span></a> <a class="idref" href="GMuAnnot.Prelude.html#d:181"><span class="id" title="variable">d</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="GMuAnnot.Prelude.html#F:178"><span class="id" title="variable">F</span></a> <a class="idref" href="GMuAnnot.Prelude.html#e:182"><span class="id" title="variable">e</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">l</span>; <span class="id" title="tactic">destruct</span> <span class="id" title="var">n</span>; <span class="id" title="var">introv</span> <span class="id" title="var">EQ</span>; <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> *; <span class="id" title="tactic">try</span> <span class="id" title="tactic">solve</span> [<span class="id" title="var">false</span>*].<br/>
&nbsp;&nbsp;- <span class="id" title="var">inversions</span> <span class="id" title="var">EQ</span>. <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">eauto</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="inzip_map_clause_trm" class="idref" href="#inzip_map_clause_trm"><span class="id" title="lemma">inzip_map_clause_trm</span></a> : <span class="id" title="keyword">∀</span> <a id="A:183" class="idref" href="#A:183"><span class="id" title="binder">A</span></a> <a id="F:184" class="idref" href="#F:184"><span class="id" title="binder">F</span></a> (<a id="Defs:185" class="idref" href="#Defs:185"><span class="id" title="binder">Defs</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.13.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="GMuAnnot.Prelude.html#A:183"><span class="id" title="variable">A</span></a>) <a id="Clauses:186" class="idref" href="#Clauses:186"><span class="id" title="binder">Clauses</span></a> <a id="def:187" class="idref" href="#def:187"><span class="id" title="binder">def</span></a> <a id="cl:188" class="idref" href="#cl:188"><span class="id" title="binder">cl</span></a>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.13.0/stdlib//Coq.Lists.List.html#In"><span class="id" title="definition">List.In</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="GMuAnnot.Prelude.html#def:187"><span class="id" title="variable">def</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.13.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="GMuAnnot.Prelude.html#cl:188"><span class="id" title="variable">cl</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.13.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="../lambda2Gmu/GMu.Zip.html#zip"><span class="id" title="definition">zip</span></a> <a class="idref" href="GMuAnnot.Prelude.html#Defs:185"><span class="id" title="variable">Defs</span></a> (<a class="idref" href="GMuAnnot.Definitions.html#map_clause_trm_trm"><span class="id" title="definition">map_clause_trm_trm</span></a> <a class="idref" href="GMuAnnot.Prelude.html#F:184"><span class="id" title="variable">F</span></a> <a class="idref" href="GMuAnnot.Prelude.html#Clauses:186"><span class="id" title="variable">Clauses</span></a>)) <a class="idref" href="http://coq.inria.fr/distrib/V8.13.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.13.0/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">∃</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.0/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">(</span></a><a id="clA:189" class="idref" href="#clA:189"><span class="id" title="binder">clA</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.13.0/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a>) (<a id="clT:190" class="idref" href="#clT:190"><span class="id" title="binder">clT</span></a> : <a class="idref" href="GMuAnnot.Definitions.html#trm"><span class="id" title="inductive">trm</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.13.0/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">),</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.13.0/stdlib//Coq.Lists.List.html#In"><span class="id" title="definition">List.In</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="GMuAnnot.Prelude.html#def:187"><span class="id" title="variable">def</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.13.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="GMuAnnot.Definitions.html#clause"><span class="id" title="constructor">clause</span></a> <a class="idref" href="GMuAnnot.Prelude.html#clA:189"><span class="id" title="variable">clA</span></a> <a class="idref" href="GMuAnnot.Prelude.html#clT:190"><span class="id" title="variable">clT</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.13.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">))</span></a> (<a class="idref" href="../lambda2Gmu/GMu.Zip.html#zip"><span class="id" title="definition">zip</span></a> <a class="idref" href="GMuAnnot.Prelude.html#Defs:185"><span class="id" title="variable">Defs</span></a> <a class="idref" href="GMuAnnot.Prelude.html#Clauses:186"><span class="id" title="variable">Clauses</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.13.0/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">∧</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="GMuAnnot.Prelude.html#cl:188"><span class="id" title="variable">cl</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="GMuAnnot.Definitions.html#clause"><span class="id" title="constructor">clause</span></a> <a class="idref" href="GMuAnnot.Prelude.html#clA:189"><span class="id" title="variable">clA</span></a> (<a class="idref" href="GMuAnnot.Prelude.html#F:184"><span class="id" title="variable">F</span></a> <a class="idref" href="GMuAnnot.Prelude.html#clT:190"><span class="id" title="variable">clT</span></a>).<br/>
&nbsp;&nbsp;<span class="id" title="var">introv</span> <span class="id" title="var">In</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">lets</span> [<span class="id" title="var">n</span> [<span class="id" title="var">ND</span> <span class="id" title="var">NC</span>]]: <a class="idref" href="../lambda2Gmu/GMu.Zip.html#Inzip_to_nth_error"><span class="id" title="lemma">Inzip_to_nth_error</span></a> <span class="id" title="var">In</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="GMuAnnot.Definitions.html#map_clause_trm_trm"><span class="id" title="definition">map_clause_trm_trm</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">NC</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">lets</span> [[<span class="id" title="var">clA</span> <span class="id" title="var">clT</span>] [? ?]]: <a class="idref" href="GMuAnnot.Prelude.html#nth_error_map"><span class="id" title="lemma">nth_error_map</span></a> <span class="id" title="var">NC</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">∃</span> <span class="id" title="var">clA</span> <span class="id" title="var">clT</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">split</span>¬.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span>× <a class="idref" href="../lambda2Gmu/GMu.Zip.html#Inzip_from_nth_error"><span class="id" title="lemma">Inzip_from_nth_error</span></a>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
The value relation is restricted to well-formed objects. 
</div>
<div class="code">
<span class="id" title="keyword">Lemma</span> <a id="value_regular" class="idref" href="#value_regular"><span class="id" title="lemma">value_regular</span></a> : <span class="id" title="keyword">∀</span> <a id="t:191" class="idref" href="#t:191"><span class="id" title="binder">t</span></a>,<br/>
&nbsp;&nbsp;<a class="idref" href="GMuAnnot.Definitions.html#value"><span class="id" title="inductive">value</span></a> <a class="idref" href="GMuAnnot.Prelude.html#t:191"><span class="id" title="variable">t</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="GMuAnnot.Definitions.html#term"><span class="id" title="inductive">term</span></a> <a class="idref" href="GMuAnnot.Prelude.html#t:191"><span class="id" title="variable">t</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> 1; <span class="id" title="var">autos</span>×.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>
</div>
<div id="footer">
  Generated by <a href="http://coq.inria.fr/">coqdoc</a> and improved with <a href="https://github.com/tebbi/coqdocjs">CoqdocJS</a>
</div>
</div>
</body>

</html>
